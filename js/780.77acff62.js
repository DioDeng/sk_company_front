"use strict";(self["webpackChunkweb"]=self["webpackChunkweb"]||[]).push([[780],{4780:function(t,e,s){s.r(e),s.d(e,{default:function(){return E}});var i=s(6252),n=s(9963),o=s(3577);const l={class:"py-4"},a={class:"mb-3 d-flex justify-content-between"},r={class:"list-unstyled"},c={class:"nav-item dropdown"},d=(0,i._)("a",{class:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," 篩選 ",-1),u={class:"dropdown-menu"},h=(0,i._)("li",null,[(0,i._)("hr",{class:"dropdown-divider"})],-1),p=["onClick"],m=(0,i._)("i",{class:"bi bi-plus-lg"},null,-1),_={class:"table table-striped table-hover"},g=(0,i._)("thead",null,[(0,i._)("tr",null,[(0,i._)("th",{scope:"col"},"#"),(0,i._)("th",{scope:"col"},"廠商"),(0,i._)("th",{scope:"col"},"付款方式"),(0,i._)("th",{scope:"col"},"案子金額"),(0,i._)("th",{scope:"col"},"施工地址"),(0,i._)("th",{scope:"col"},"施工日期"),(0,i._)("th",{scope:"col"},"狀態"),(0,i._)("th",{scope:"col"},"修改"),(0,i._)("th",{scope:"col"},"檢視")])],-1),w={scope:"row"},b=["onClick"],k={key:0},y={key:1},f=["onClick"],C=(0,i._)("i",{class:"bi bi-pencil"},null,-1),O=[C],$=["onClick"],L=(0,i._)("i",{class:"bi bi-filetype-pdf"},null,-1),v=[L];function S(t,e,s,C,L,S){return(0,i.wg)(),(0,i.iD)("section",l,[(0,i._)("div",a,[(0,i._)("ul",r,[(0,i._)("li",c,[d,(0,i._)("ul",u,[(0,i._)("li",null,[(0,i._)("a",{class:"dropdown-item",href:"#",onClick:e[0]||(e[0]=(0,n.iM)((t=>L.selectOption.sort="asc"),["prevent"]))},"新->舊")]),(0,i._)("li",null,[(0,i._)("a",{class:"dropdown-item",href:"#",onClick:e[1]||(e[1]=(0,n.iM)((t=>L.selectOption.sort=""),["prevent"]))},"舊->新")]),h,(0,i._)("li",null,[(0,i._)("a",{class:"dropdown-item",href:"#",onClick:e[2]||(e[2]=(0,n.iM)((t=>L.selectOption.keyword=void 0),["prevent"]))},"所有")]),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(L.companyList,((t,e)=>((0,i.wg)(),(0,i.iD)("li",{key:e},[(0,i._)("a",{class:"dropdown-item",href:"#",onClick:(0,n.iM)((e=>L.selectOption.keyword=t._id),["prevent"])},(0,o.zw)(t.companyName),9,p)])))),128))])])]),(0,i._)("button",{class:"btn btn-dark",onClick:e[3]||(e[3]=t=>this.$emitter.emit("addEditOrder",{status:!0}))},[(0,i.Uk)(" 新增工單"),m])]),(0,i._)("table",_,[g,(0,i._)("tbody",null,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(L.orderList,((t,e)=>((0,i.wg)(),(0,i.iD)("tr",{key:e},[(0,i._)("th",w,(0,o.zw)(e+1),1),(0,i._)("td",null,(0,o.zw)(t.company.companyName),1),(0,i._)("td",null,(0,o.zw)(t.paymentMethod),1),(0,i._)("td",null,"$"+(0,o.zw)(this.$toCurrency(t.total)),1),(0,i._)("td",null,(0,o.zw)(t.address),1),(0,i._)("td",null,(0,o.zw)(t.constructionDate),1),(0,i._)("td",null,[(0,i._)("button",{type:"button",class:(0,o.C_)(["btn",[t.status?"btn-success":"btn-outline-danger"]]),onClick:e=>S.updateStatus(t)},[t.status?((0,i.wg)(),(0,i.iD)("span",k,"已完成")):((0,i.wg)(),(0,i.iD)("span",y,"未完成"))],10,b)]),(0,i._)("td",null,[(0,i._)("button",{class:"btn btn-secondary",onClick:e=>this.$emitter.emit("editOrder",{status:!1,data:t})},O,8,f)]),(0,i._)("td",null,[(0,i._)("button",{class:"btn btn-warning",onClick:e=>this.$emitter.emit("pdfEmit",t)},v,8,$)])])))),128))])])])}s(560);var z=s(5044),D=s(8769),M={data(){return{companyList:[],orderList:[],selectOption:{sort:"asc",keyword:void 0}}},watch:{"selectOption.sort"(){this.getOrderList()},"selectOption.keyword"(){this.getOrderList()}},methods:{checkSignIn(){const t=(0,D.LP)();t?this.$http.defaults.headers.common.Authorization=`Bearer ${t}`:this.$router.push("/login")},getOrderList(){this.$emitter.emit("loadingStatus",!0),(0,z.RJ)(this.selectOption).then((t=>{this.$emitter.emit("loadingStatus",!1),this.orderList=t.data.data})).catch((t=>{this.$emitter.emit("loadingStatus",!1),console.log(t.response.data.message)}))},updateStatus(t){this.$emitter.emit("loadingStatus",!0),(0,z.TA)(t).then((()=>{this.getOrderList(),this.$emitter.emit("loadingStatus",!1)})).catch((t=>{console.log(t),this.$emitter.emit("loadingStatus",!1)}))},getCompanyList(){this.$emitter.emit("loadingStatus",!0),(0,z.rO)().then((t=>{this.$emitter.emit("loadingStatus",!1),this.companyList=t.data.data})).catch((t=>{this.$emitter.emit("loadingStatus",!1),console.log(t)}))}},mounted(){this.getOrderList(),this.getCompanyList(),this.$emitter.on("getOrder",(()=>{this.getOrderList()}))},created(){this.checkSignIn()}},x=s(3744);const A=(0,x.Z)(M,[["render",S]]);var E=A}}]);
//# sourceMappingURL=780.77acff62.js.map