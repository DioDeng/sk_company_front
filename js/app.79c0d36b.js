(function(){"use strict";var e={185:function(e,t,a){a.d(t,{BM:function(){return l},Er:function(){return y},Lb:function(){return c},Lk:function(){return i},UP:function(){return m},Z3:function(){return u},ZB:function(){return h},ak:function(){return r},h$:function(){return b},mV:function(){return p},o:function(){return s},sv:function(){return f},y1:function(){return d},zL:function(){return g}});var o=a(4335);const n="https://worktimesystem.zeabur.app",s=()=>o.A.get(`${n}/api/Employees`),l=e=>o.A.post(`${n}/api/Employees`,e),i=(e,t)=>o.A.put(`${n}/api/Employees/${t}`,e),r=e=>o.A.delete(`${n}/api/Employees/${e}`),d=e=>o.A.post(`${n}/api/Employees/upload-photo`,e),m=()=>o.A.get(`${n}/api/Vendors`),u=e=>o.A.post(`${n}/api/Vendors`,e),c=(e,t)=>o.A.put(`${n}/api/Vendors/${t}`,e),p=e=>o.A.delete(`${n}/api/Vendors/${e}`),h=e=>o.A.get(`${n}/api/Vendors/${e}`),f=()=>o.A.get(`${n}/api/WorkOrders`),b=e=>o.A.post(`${n}/api/WorkOrders`,e),g=(e,t)=>o.A.put(`${n}/api/WorkOrders/${t}`,e),y=e=>o.A.delete(`${n}/api/WorkOrders/${e}`)},5529:function(e,t,a){var o=a(3751),n=a(5261),s=a(3505),l=a(7013),i=a(1066),r=a(3688),d=a.n(r),m=a(7380),u=a(454),c=a(4335),p=a(1021),h=a(641),f=a(33);const b={style:{"background-color":"#dee0d8"}},g={class:"container py-4"},y={class:"row text-center"},k={class:"col-2"},v={class:"card border-2 border-dark rounded-4 h-100"},L={class:"col-10"};function D(e,t,a,o,n,s){const l=(0,h.g2)("Navbar"),i=(0,h.g2)("router-view"),r=(0,h.g2)("Message"),d=(0,h.g2)("Loading"),m=(0,h.g2)("EmployeesModal"),u=(0,h.g2)("VendorModal"),c=(0,h.g2)("InforModal"),p=(0,h.g2)("OrderModal");return(0,h.uX)(),(0,h.CE)(h.FK,null,[(0,h.Lk)("section",b,[(0,h.Lk)("section",g,[(0,h.Lk)("div",y,[(0,h.Lk)("div",k,[(0,h.Lk)("div",v,[(0,h.bF)(l)])]),(0,h.Lk)("div",L,[(0,h.Lk)("div",{class:"card rounded-4 p-4 bg-body border border-2 border-dark",style:(0,f.Tr)({height:n.height+"px"})},[(0,h.bF)(i)],4)])])]),(0,h.bF)(r),(0,h.bF)(d)]),(0,h.bF)(m),(0,h.bF)(u),(0,h.bF)(c),(0,h.bF)(p)],64)}const E=e=>((0,h.Qi)("data-v-4ae3e66e"),e=e(),(0,h.jt)(),e),$={class:"py-4 px-3 d-flex align-items-center flex-column h-100"},V=E((()=>(0,h.Lk)("h5",{class:"border-bottom w-100 pb-3"},"工單系統",-1))),x={class:"list-unstyled py-3 w-100"};function C(e,t,a,o,n,s){const l=(0,h.g2)("router-link");return(0,h.uX)(),(0,h.CE)("section",$,[V,(0,h.Lk)("ul",x,[((0,h.uX)(!0),(0,h.CE)(h.FK,null,(0,h.pI)(n.menuList,((e,t)=>((0,h.uX)(),(0,h.CE)("li",{key:t,class:(0,f.C4)(["p-3 rounded w-100",{checked:this.$route.path.split("/")[1]===e.path.split("/")[1]}])},[(0,h.bF)(l,{to:e.path,class:"text-decoration-none h5"},{default:(0,h.k6)((()=>[(0,h.Lk)("i",{class:(0,f.C4)(["bi me-2",e.icon])},null,2),(0,h.eW)((0,f.v_)(e.title),1)])),_:2},1032,["to"])],2)))),128))]),(0,h.bF)(l,{to:"/login",class:"mt-auto"},{default:(0,h.k6)((()=>[(0,h.eW)("logout")])),_:1})])}var M={data(){return{menuList:[{title:"Home",icon:"bi-laptop text-secondary",color:"primary",path:"/"},{title:"工單",icon:"bi-list-task text-warning",color:"warning",path:"/order"},{title:"員工",icon:"bi-people text-success",color:"success",path:"/employees"},{title:"廠商",icon:"bi-building text-info",color:"info",path:"/company"}]}}},F=a(6262);const w=(0,F.A)(M,[["render",C],["__scopeId","data-v-4ae3e66e"]]);var S=w;const W={class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"addEditWorker"},A={class:"modal-dialog"},O={class:"modal-content"},U={class:"modal-header"},I={class:"modal-title fs-5",id:"exampleModalLabel"},T={key:0},X={key:1},_={class:"modal-body"},j={class:"form-floating mb-3"},N={for:"floatingInput"},P={class:"form-floating mb-3"},J={for:"phone"},q={class:"form-floating mb-3"},K={for:"floatingInput"},B={class:"input-group mb-3"},z=(0,h.Lk)("label",{for:"imageFront",class:"input-group-text"},"上傳身分證或居留證",-1),R={class:"mb-3"},Z=["src"],Q={class:"input-group mb-3"},G=(0,h.Lk)("label",{for:"date",class:"input-group-text"},"入職日期",-1),Y={class:"form-floating mb-3"},H={for:"floatingInput"},ee={class:"modal-footer justify-content-between"},te=(0,h.Lk)("div",null,null,-1),ae=["disabled"];function oe(e,t,a,n,s,l){const i=(0,h.g2)("VField"),r=(0,h.g2)("ErrorMessage"),d=(0,h.g2)("error-message"),m=(0,h.g2)("VForm");return(0,h.uX)(),(0,h.CE)("div",W,[(0,h.Lk)("div",A,[(0,h.Lk)("div",O,[(0,h.Lk)("div",U,[(0,h.Lk)("h1",I,[s.status?((0,h.uX)(),(0,h.CE)("span",T,"新增員工")):((0,h.uX)(),(0,h.CE)("span",X,"修改員工"))]),(0,h.Lk)("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=(...e)=>l.hideModal&&l.hideModal(...e)),"aria-label":"Close"})]),(0,h.bF)(m,{ref:"formRefSignin",id:"profileForm",onSubmit:l.addEditWorker},{default:(0,h.k6)((({errors:e,meta:a})=>[(0,h.Lk)("div",_,[(0,h.Lk)("div",j,[(0,h.bF)(i,{name:"姓名",type:"text",rules:"required",class:"form-control",modelValue:s.tempData.name,"onUpdate:modelValue":t[1]||(t[1]=e=>s.tempData.name=e)},null,8,["modelValue"]),(0,h.Lk)("label",N,[(0,h.eW)("員工姓名 "),(0,h.bF)(r,{name:"姓名",class:"text-danger ms-3"})])]),(0,h.Lk)("div",P,[(0,h.bF)(i,{id:"phone",name:"phone",type:"text",class:(0,f.C4)(["form-control",{"is-invalid":e["電話"]}]),rules:l.isPhone,modelValue:s.tempData.phone,"onUpdate:modelValue":t[2]||(t[2]=e=>s.tempData.phone=e)},null,8,["class","rules","modelValue"]),(0,h.Lk)("label",J,[(0,h.eW)("phone"),(0,h.bF)(d,{name:"phone",class:"text-danger ms-3"})])]),(0,h.Lk)("div",q,[(0,h.bF)(i,{name:"身分證字號或居留證",class:"form-control",type:"text",rules:{regex:/^[A-Za-z]{1}[A-Za-z1-2]{1}[0-9]{8}$/},modelValue:s.tempData.identificationNumber,"onUpdate:modelValue":t[3]||(t[3]=e=>s.tempData.identificationNumber=e)},null,8,["modelValue"]),(0,h.Lk)("label",K,[(0,h.eW)("身分證字號或居留證 "),(0,h.bF)(r,{name:"身分證字號或居留證",class:"ms-3 text-danger"})])]),(0,h.Lk)("div",B,[(0,h.Lk)("input",{class:"form-control",type:"file",accept:"image/*",id:"imageFront",name:"image",multiple:"multiple",onChange:t[4]||(t[4]=(...e)=>l.uploadImage&&l.uploadImage(...e))},null,32),z]),(0,h.bo)((0,h.Lk)("div",R,[(0,h.Lk)("img",{src:s.tempData.photoUrl,alt:"",style:{widht:"200px"}},null,8,Z)],512),[[o.aG,s.tempData.photoUrl]]),(0,h.Lk)("div",Q,[G,(0,h.bo)((0,h.Lk)("input",{id:"date",name:"date",type:"date",placeholder:"Enter email",class:"form-control","onUpdate:modelValue":t[5]||(t[5]=e=>s.tempData.entryDate=e)},null,512),[[o.Jo,s.tempData.entryDate]])]),(0,h.Lk)("div",Y,[(0,h.bF)(i,{name:"時薪",type:"text",modelValue:s.tempData.hourlyRate,"onUpdate:modelValue":t[6]||(t[6]=e=>s.tempData.hourlyRate=e),rules:{regex:/^(([^0][0-9]+|0)\.([0-9])$)|^(([^0][0-9]+|0)$)|^(([1-9]+)\.([0-9])$)|^(([1-9]+)$)/},class:"form-control"},null,8,["modelValue"]),(0,h.Lk)("label",H,[(0,h.eW)("時薪 "),(0,h.bF)(r,{name:"時薪",class:"text-danger ms-3"})])])]),(0,h.Lk)("div",ee,[s.status?(0,h.Q3)("",!0):((0,h.uX)(),(0,h.CE)("button",{key:0,type:"button",class:"btn btn-outline-danger",onClick:t[7]||(t[7]=e=>l.deleteEmployees(s.tempData.id))}," 刪除僱員資料 ")),te,(0,h.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:!a.valid}," 儲存 ",8,ae)])])),_:1},8,["onSubmit"])])])],512)}var ne=a(185),se={data(){return{modal:"",status:!1,tempData:{name:"",phone:"",photoUrl:"",seniority:"",hourlyRate:0,entryDate:"",monthlySalary:10,position:"工人",identificationNumber:""}}},methods:{isPhone(e){const t=/^(09)[0-9]{8}$/;return!!t.test(e)||"需要正確的電話號碼"},addEditWorker(){this.$emitter.emit("loadingStatus",!0),this.tempData.id?(0,ne.Lk)(this.tempData,this.tempData.id).then((()=>{this.$emitter.emit("messageModal",{status:!0,message:"修改成功"}),this.$emitter.emit("getEmployeesLsit"),this.$emitter.emit("loadingStatus",!1),this.hideModal()})).catch((e=>{console.log(e),this.$emitter.emit("loadingStatus",!1)})):(0,ne.BM)(this.tempData).then((e=>{console.log(e),this.$emitter.emit("messageModal",{status:!0,message:"新增成功"}),this.$emitter.emit("getEmployeesLsit"),this.hideModal()})).catch((e=>{this.$emitter.emit("messageModal",{status:!1,message:`新增失敗，原因：${JSON.stringify(e.response.data.errors)}`}),this.$emitter.emit("loadingStatus",!1)}))},deleteEmployees(e){(0,ne.ak)(e).then((()=>{this.$emitter.emit("messageModal",{status:!0,message:"刪除成功"}),this.$emitter.emit("getEmployeesLsit"),this.hideModal()})).catch()},uploadImage(e){this.$emitter.emit("loadingStatus",!0);const t=new FormData;t.append("file",e.target.files[0]),(0,ne.y1)(t).then((e=>{console.log(e),this.tempData.photoUrl=e.data.imageUrl,this.$emitter.emit("loadingStatus",!1)})).catch((e=>{console.log(e)}))},showModal(){this.modal.show()},hideModal(){this.tempData={},this.modal.hide()}},mounted(){this.modal=new u.aF(this.$refs.addEditWorker),this.$emitter.on("addEditWorker",(e=>{this.status=e.status,e.status||(this.tempData=JSON.parse(JSON.stringify(e.data))),this.showModal()}))}};const le=(0,F.A)(se,[["render",oe]]);var ie=le;const re={class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"vendorModal"},de={class:"modal-dialog"},me={class:"modal-content"},ue={class:"modal-header"},ce={class:"modal-title fs-5",id:"exampleModalLabel"},pe={key:0},he={key:1},fe={class:"modal-body"},be={class:"form-floating mb-3"},ge={for:"floatingInput"},ye={class:"form-floating mb-3"},ke={for:"floatingInput"},ve={class:"form-floating mb-3"},Le={for:"phone"},De={class:"form-floating mb-3"},Ee={for:"floatingInput"},$e={class:"form-floating mb-3"},Ve={for:"floatingInput"},xe={class:"modal-footer justify-content-between"},Ce=(0,h.Lk)("div",null,null,-1),Me=["disabled"];function Fe(e,t,a,o,n,s){const l=(0,h.g2)("VField"),i=(0,h.g2)("ErrorMessage"),r=(0,h.g2)("error-message"),d=(0,h.g2)("VForm");return(0,h.uX)(),(0,h.CE)("div",re,[(0,h.Lk)("div",de,[(0,h.Lk)("div",me,[(0,h.Lk)("div",ue,[(0,h.Lk)("h1",ce,[n.status?((0,h.uX)(),(0,h.CE)("span",pe,"新增廠商")):((0,h.uX)(),(0,h.CE)("span",he,"修改廠商"))]),(0,h.Lk)("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=(...e)=>s.hideModal&&s.hideModal(...e)),"aria-label":"Close"})]),(0,h.bF)(d,{ref:"formRefSignin",id:"profileForm",onSubmit:s.addEditWorker},{default:(0,h.k6)((({errors:e,meta:a})=>[(0,h.Lk)("div",fe,[(0,h.Lk)("div",be,[(0,h.bF)(l,{name:"姓名",type:"text",rules:"required",class:"form-control",modelValue:n.tempData.name,"onUpdate:modelValue":t[1]||(t[1]=e=>n.tempData.name=e)},null,8,["modelValue"]),(0,h.Lk)("label",ge,[(0,h.eW)("廠商名稱 "),(0,h.bF)(i,{name:"姓名",class:"text-danger ms-3"})])]),(0,h.Lk)("div",ye,[(0,h.bF)(l,{name:"聯絡人",type:"text",rules:"required",class:"form-control",modelValue:n.tempData.contactPerson,"onUpdate:modelValue":t[2]||(t[2]=e=>n.tempData.contactPerson=e)},null,8,["modelValue"]),(0,h.Lk)("label",ke,[(0,h.eW)("聯絡人名稱 "),(0,h.bF)(i,{name:"聯絡人",class:"text-danger ms-3"})])]),(0,h.Lk)("div",ve,[(0,h.bF)(l,{id:"phone",name:"phone",type:"text",class:(0,f.C4)(["form-control",{"is-invalid":e["電話"]}]),modelValue:n.tempData.phone,"onUpdate:modelValue":t[3]||(t[3]=e=>n.tempData.phone=e)},null,8,["class","modelValue"]),(0,h.Lk)("label",Le,[(0,h.eW)("phone"),(0,h.bF)(r,{name:"phone",class:"text-danger ms-3"})])]),(0,h.Lk)("div",De,[(0,h.bF)(l,{name:"地址",type:"text",rules:"required",class:"form-control",modelValue:n.tempData.address,"onUpdate:modelValue":t[4]||(t[4]=e=>n.tempData.address=e)},null,8,["modelValue"]),(0,h.Lk)("label",Ee,[(0,h.eW)("廠商地址 "),(0,h.bF)(i,{name:"地址",class:"text-danger ms-3"})])]),(0,h.Lk)("div",$e,[(0,h.bF)(l,{name:"統編",type:"text",modelValue:n.tempData.taxId,"onUpdate:modelValue":t[5]||(t[5]=e=>n.tempData.taxId=e),rules:{regex:/^[0-9]{8}$/},class:"form-control"},null,8,["modelValue"]),(0,h.Lk)("label",Ve,[(0,h.eW)("統編 "),(0,h.bF)(i,{name:"統編",class:"text-danger ms-3"})])])]),(0,h.Lk)("div",xe,[n.status?(0,h.Q3)("",!0):((0,h.uX)(),(0,h.CE)("button",{key:0,type:"button",class:"btn btn-outline-danger",onClick:t[6]||(t[6]=e=>s.deleteVendor(n.tempData.id))}," 刪除廠商資料 ")),Ce,(0,h.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:!a.valid}," 儲存 ",8,Me)])])),_:1},8,["onSubmit"])])])],512)}var we={data(){return{modal:"",status:!1,tempData:{name:"",phone:"",idNumber:""}}},methods:{addEditWorker(){this.$emitter.emit("loadingStatus",!0),this.tempData.id?(console.log(this.tempData),(0,ne.Lb)(this.tempData,this.tempData.id).then((()=>{this.$emitter.emit("messageModal",{status:!0,message:"修改成功"}),this.$emitter.emit("apiGetVendorLsit"),this.$emitter.emit("loadingStatus",!1),this.hideModal()})).catch((e=>{console.log(e),this.$emitter.emit("loadingStatus",!1)}))):(0,ne.Z3)(this.tempData).then((e=>{console.log(e),this.$emitter.emit("messageModal",{status:!0,message:"新增成功"}),this.$emitter.emit("apiGetVendorLsit"),this.hideModal()})).catch((e=>{this.$emitter.emit("messageModal",{status:!1,message:`新增失敗，原因：${JSON.stringify(e.response.data.errors)}`}),this.$emitter.emit("loadingStatus",!1)}))},deleteVendor(e){(0,ne.mV)(e).then((()=>{this.$emitter.emit("messageModal",{status:!0,message:"刪除成功"}),this.$emitter.emit("apiGetVendorLsit"),this.hideModal()})).catch()},showModal(){this.modal.show()},hideModal(){this.tempData={},this.modal.hide()}},mounted(){this.modal=new u.aF(this.$refs.vendorModal),this.$emitter.on("addEditVendor",(e=>{this.status=e.status,e.status||(this.tempData=JSON.parse(JSON.stringify(e.data))),this.showModal()}))}};const Se=(0,F.A)(we,[["render",Fe]]);var We=Se;const Ae={class:"modal fade",id:"exampleModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"vendorInfo"},Oe={class:"modal-dialog"},Ue={class:"modal-content"},Ie={class:"modal-header"},Te={class:"modal-title fs-5",id:"exampleModalLabel"},Xe=(0,h.Lk)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),_e={class:"modal-body"},je={class:"accordion",id:"accordionExample"},Ne={class:"accordion-header"},Pe=["data-bs-target"],Je={key:0,class:"ms-2 text-success"},qe={key:1,class:"ms-2 text-danger"},Ke=["id"],Be={class:"accordion-body"};function ze(e,t,a,o,n,s){return(0,h.uX)(),(0,h.CE)("div",Ae,[(0,h.Lk)("div",Oe,[(0,h.Lk)("div",Ue,[(0,h.Lk)("div",Ie,[(0,h.Lk)("h1",Te,(0,f.v_)(n.tempData.name),1),Xe]),(0,h.Lk)("div",_e,[(0,h.Lk)("div",je,[((0,h.uX)(!0),(0,h.CE)(h.FK,null,(0,h.pI)(n.caseList,((e,t)=>((0,h.uX)(),(0,h.CE)("div",{key:t,class:"accordion-item"},[(0,h.Lk)("h2",Ne,[(0,h.Lk)("button",{class:(0,f.C4)(["accordion-button",{collapsed:0!==t}]),type:"button","data-bs-toggle":"collapse","data-bs-target":`#collapse${t}`,"aria-expanded":"true","aria-controls":"collapseOne"},[(0,h.eW)((0,f.v_)(e.title)+" #"+(0,f.v_)(t+1)+" ",1),e.isDone?((0,h.uX)(),(0,h.CE)("span",Je,"已完成")):((0,h.uX)(),(0,h.CE)("span",qe,"未完成"))],10,Pe)]),(0,h.Lk)("div",{id:`collapse${t}`,class:(0,f.C4)(["accordion-collapse collapse",{show:0===t}]),"data-bs-parent":"#accordionExample"},[(0,h.Lk)("div",Be,(0,f.v_)(e.content),1)],10,Ke)])))),128))])])])])],512)}var Re={data(){return{caseList:[{title:"自治",isDone:!0,date:"2024/01/02",content:"hidden by default, until the collapse plugin adds the appropriateclasses that we use to style each element. These classes control the overall appearance, as well as the showing and hiding via CSS transitions. You can modify any of this with custom CSS or overriding our default variables. Its also worth noting that just"},{title:"中正",isDone:!0,date:"2024/03/02",content:"hidden by default, until the collapse plugin adds the appropriateclasses that we use to style each element. These classes control the overall appearance, as well as the showing and hiding via CSS transitions. You can modify any of this with custom CSS or overriding our default variables. Its also worth noting that just"},{title:"市政",isDone:!1,date:"2024/04/02",content:"hidden by default, until the collapse plugin adds the appropriateclasses that we use to style each element. These classes control the overall appearance, as well as the showing and hiding via CSS transitions. You can modify any of this with custom CSS or overriding our default variables. Its also worth noting that just"},{title:"文山",isDone:!0,date:"2024/05/02",content:"hidden by default, until the collapse plugin adds the appropriateclasses that we use to style each element. These classes control the overall appearance, as well as the showing and hiding via CSS transitions. You can modify any of this with custom CSS or overriding our default variables. Its also worth noting that just"}],infoModal:"",tempData:{}}},methods:{getVendor(e){this.$emitter.emit("loadingStatus",!0),(0,ne.ZB)(e).then((e=>{this.tempData=e.data,this.$emitter.emit("loadingStatus",!1)})).catch((e=>{console.log(e),this.$emitter.emit("loadingStatus",!1)}))}},mounted(){this.infoModal=new u.aF(this.$refs.vendorInfo),this.$emitter.on("infoVendor",(e=>{this.getVendor(e),this.infoModal.show()}))}};const Ze=(0,F.A)(Re,[["render",ze]]);var Qe=Ze;const Ge={class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"addEditOrder"},Ye={class:"modal-dialog modal-lg"},He={class:"modal-content"},et={class:"modal-header"},tt={class:"modal-title fs-5",id:"exampleModalLabel"},at={key:0},ot={key:1},nt={class:"modal-body"},st={class:"form-floating mb-3"},lt={for:"floatingInput"},it={class:"form-floating mb-3"},rt={id:"datalistOptions"},dt=["value"],mt={for:"floatingInput"},ut={class:"form-floating mb-3"},ct={for:"floatingInput"},pt={class:"form-floating mb-3"},ht={for:"floatingInput"},ft={class:"form-floating mb-3"},bt={for:"floatingInput"},gt={class:"form-floating mb-3"},yt={for:"floatingInput"},kt={class:"form-floating mb-3"},vt=(0,h.Lk)("h5",null,"工人：",-1),Lt=["onUpdate:modelValue"],Dt=["value"],Et=["onUpdate:modelValue"],$t=["onUpdate:modelValue"],Vt=["onClick"],xt={class:"d-flex justify-content-center"},Ct=(0,h.Lk)("h5",null,"臨時工：",-1),Mt=["onUpdate:modelValue"],Ft=["onUpdate:modelValue"],wt=["onUpdate:modelValue"],St=["onUpdate:modelValue"],Wt=["onUpdate:modelValue"],At=["onClick"],Ot={class:"d-flex justify-content-center"},Ut={class:"modal-footer justify-content-between"},It=(0,h.Lk)("div",null,null,-1),Tt=["disabled"];function Xt(e,t,a,n,s,l){const i=(0,h.g2)("VField"),r=(0,h.g2)("ErrorMessage"),d=(0,h.g2)("VForm");return(0,h.uX)(),(0,h.CE)("div",Ge,[(0,h.Lk)("div",Ye,[(0,h.Lk)("div",He,[(0,h.Lk)("div",et,[(0,h.Lk)("h1",tt,[s.status?((0,h.uX)(),(0,h.CE)("span",at,"新增工單")):((0,h.uX)(),(0,h.CE)("span",ot,"修改工單"))]),(0,h.Lk)("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=(...e)=>l.hideModal&&l.hideModal(...e)),"aria-label":"Close"})]),(0,h.bF)(d,{ref:"formRefSignin",id:"profileForm",onSubmit:l.addEditOrder},{default:(0,h.k6)((({meta:e})=>[(0,h.Lk)("div",nt,[(0,h.Lk)("section",null,[(0,h.Lk)("div",st,[(0,h.bF)(i,{name:"案子簡稱",type:"text",rules:"required",class:"form-control",modelValue:s.tempData.name,"onUpdate:modelValue":t[1]||(t[1]=e=>s.tempData.name=e)},null,8,["modelValue"]),(0,h.Lk)("label",lt,[(0,h.eW)("案子簡稱 "),(0,h.bF)(r,{name:"案子簡稱",class:"text-danger ms-3"})])]),(0,h.Lk)("div",it,[(0,h.bF)(i,{name:"廠商",type:"text",rules:l.isCompanyExist,class:"form-control",list:"datalistOptions",modelValue:s.tempData.companyName,"onUpdate:modelValue":t[2]||(t[2]=e=>s.tempData.companyName=e)},null,8,["rules","modelValue"]),(0,h.Lk)("datalist",rt,[((0,h.uX)(!0),(0,h.CE)(h.FK,null,(0,h.pI)(s.vendorList,((e,t)=>((0,h.uX)(),(0,h.CE)("option",{key:t,value:e.name},null,8,dt)))),128))]),(0,h.Lk)("label",mt,[(0,h.eW)("廠商名稱"),(0,h.bF)(r,{name:"廠商",class:"text-danger ms-3"})])]),(0,h.Lk)("div",ut,[(0,h.bF)(i,{name:"施工地址",rules:"required",type:"text",modelValue:s.tempData.constructionAddress,"onUpdate:modelValue":t[3]||(t[3]=e=>s.tempData.constructionAddress=e),class:"form-control"},null,8,["modelValue"]),(0,h.Lk)("label",ct,[(0,h.eW)("施工地址"),(0,h.bF)(r,{name:"施工地址",class:"text-danger ms-3"})])]),(0,h.Lk)("div",pt,[(0,h.bF)(i,{name:"施工日期",rules:"required",type:"date",modelValue:s.tempData.constructionDate,"onUpdate:modelValue":t[4]||(t[4]=e=>s.tempData.constructionDate=e),class:"form-control"},null,8,["modelValue"]),(0,h.Lk)("label",ht,[(0,h.eW)("施工日期"),(0,h.bF)(r,{name:"施工日期",class:"text-danger ms-3"})])]),(0,h.Lk)("div",ft,[(0,h.bF)(i,{name:"總金額",type:"number",rules:"required|min_value:0",modelValue:s.tempData.totalAmount,"onUpdate:modelValue":t[5]||(t[5]=e=>s.tempData.totalAmount=e),class:"form-control"},null,8,["modelValue"]),(0,h.Lk)("label",bt,[(0,h.eW)("總金額"),(0,h.bF)(r,{name:"總金額",class:"text-danger ms-3"})])]),(0,h.Lk)("div",gt,[(0,h.bF)(i,{name:"保留款",type:"number",rules:"required|min_value:0",modelValue:s.tempData.retentionFee,"onUpdate:modelValue":t[6]||(t[6]=e=>s.tempData.retentionFee=e),class:"form-control"},null,8,["modelValue"]),(0,h.Lk)("label",yt,[(0,h.eW)("保留款"),(0,h.bF)(r,{name:"保留款",class:"text-danger ms-3"})])]),(0,h.Lk)("div",kt,[vt,(0,h.eW)(" "+(0,f.v_)(s.tempData.timeEntries)+" ",1),((0,h.uX)(!0),(0,h.CE)(h.FK,null,(0,h.pI)(s.tempData.timeEntries,((e,t)=>((0,h.uX)(),(0,h.CE)("div",{key:t,class:"input-group mb-2"},[(0,h.bo)((0,h.Lk)("select",{class:"form-select","aria-label":"Default select example","onUpdate:modelValue":e=>s.tempData.timeEntries[t].employeeId=e},[((0,h.uX)(!0),(0,h.CE)(h.FK,null,(0,h.pI)(s.employList,((e,t)=>((0,h.uX)(),(0,h.CE)("option",{key:t,value:e.id},(0,f.v_)(e.name),9,Dt)))),128))],8,Lt),[[o.u1,s.tempData.timeEntries[t].employeeId]]),(0,h.bo)((0,h.Lk)("input",{type:"datetime-local","aria-label":"Last name",class:"form-control","onUpdate:modelValue":e=>s.tempData.timeEntries[t].startTime=e},null,8,Et),[[o.Jo,s.tempData.timeEntries[t].startTime]]),(0,h.bo)((0,h.Lk)("input",{type:"datetime-local","aria-label":"Last name",class:"form-control","onUpdate:modelValue":e=>s.tempData.timeEntries[t].endTime=e},null,8,$t),[[o.Jo,s.tempData.timeEntries[t].endTime]]),(0,h.Lk)("button",{class:"btn btn-outline-danger",type:"button",id:"button-add",onClick:e=>l.deleteEntriesArray(t)}," 刪除 ",8,Vt)])))),128)),(0,h.Lk)("div",xt,[(0,h.Lk)("button",{class:"btn btn-outline-dark",type:"button",onClick:t[7]||(t[7]=(...e)=>l.addEntriesArray&&l.addEntriesArray(...e))}," 新增 ")])]),(0,h.Lk)("div",null,[Ct,((0,h.uX)(!0),(0,h.CE)(h.FK,null,(0,h.pI)(s.tempData.temporaryWorkers,((e,t)=>((0,h.uX)(),(0,h.CE)("div",{key:t,class:"input-group mb-2"},[(0,h.bo)((0,h.Lk)("input",{type:"text",placeholder:"工人姓名",class:"form-control","onUpdate:modelValue":e=>s.tempData.temporaryWorkers[t].name=e},null,8,Mt),[[o.Jo,s.tempData.temporaryWorkers[t].name]]),(0,h.bo)((0,h.Lk)("input",{type:"text","aria-label":"Last name",placeholder:"工人電話",class:"form-control","onUpdate:modelValue":e=>s.tempData.temporaryWorkers[t].phone=e},null,8,Ft),[[o.Jo,s.tempData.temporaryWorkers[t].phone]]),(0,h.bo)((0,h.Lk)("input",{type:"number","aria-label":"Last name",placeholder:"時薪",class:"form-control","onUpdate:modelValue":e=>s.tempData.temporaryWorkers[t].hourlyRate=e},null,8,wt),[[o.Jo,s.tempData.temporaryWorkers[t].hourlyRate]]),(0,h.bo)((0,h.Lk)("input",{type:"datetime-local","aria-label":"Last name",class:"form-control","onUpdate:modelValue":e=>s.tempData.temporaryWorkers[t].startTime=e},null,8,St),[[o.Jo,s.tempData.temporaryWorkers[t].startTime]]),(0,h.bo)((0,h.Lk)("input",{type:"datetime-local","aria-label":"Last name",class:"form-control","onUpdate:modelValue":e=>s.tempData.temporaryWorkers[t].endTime=e},null,8,Wt),[[o.Jo,s.tempData.temporaryWorkers[t].endTime]]),(0,h.Lk)("button",{class:"btn btn-outline-danger",type:"button",id:"button-add",onClick:e=>l.deleteTransArray(t)}," 刪除 ",8,At)])))),128)),(0,h.Lk)("div",Ot,[(0,h.Lk)("button",{class:"btn btn-outline-dark",type:"button",onClick:t[8]||(t[8]=(...e)=>l.addTransArray&&l.addTransArray(...e))}," 新增 ")])])])]),(0,h.Lk)("div",Ut,[s.status?(0,h.Q3)("",!0):((0,h.uX)(),(0,h.CE)("button",{key:0,type:"button",class:"btn btn-outline-danger",onClick:t[9]||(t[9]=e=>l.deleteOrder(s.tempData.id))}," 刪除該工單 ")),It,(0,h.Lk)("button",{type:"submit",class:"btn btn-primary",disabled:!e.valid}," 儲存 ",8,Tt)])])),_:1},8,["onSubmit"])])])],512)}a(4114);var _t={data(){return{vendorList:[],employList:[],modal:"",status:!1,tempData:{remainingPayment:0,timeEntries:[],temporaryWorkers:[]}}},methods:{isCompanyExist(e){this.tempData.company="";let t="";return this.vendorList.forEach((a=>{a.name===e&&(t=a.company,this.tempData.vendorId=a.id)})),""!==t||"查無此廠商"},addEditOrder(){this.$emitter.emit("loadingStatus",!0),this.tempData.id?(console.log("修改"),(0,ne.zL)(this.tempData,this.tempData.id).then((()=>{this.$emitter.emit("messageModal",{status:!0,message:"修改成功"}),this.$emitter.emit("getOrderLsit"),this.$emitter.emit("loadingStatus",!1),this.hideModal()})).catch((e=>{console.log(e),this.$emitter.emit("loadingStatus",!1)}))):(console.log("新增"),(0,ne.h$)(this.tempData).then((e=>{console.log(e),this.$emitter.emit("messageModal",{status:!0,message:"新增成功"}),this.$emitter.emit("getOrderLsit"),this.hideModal()})).catch((e=>{console.log(e),this.$emitter.emit("messageModal",{status:!1,message:`新增失敗，原因：${JSON.stringify(e.response)}`}),this.$emitter.emit("loadingStatus",!1)})))},deleteOrder(e){this.$emitter.emit("loadingStatus",!0),(0,ne.Er)(e).then((()=>{this.$emitter.emit("messageModal",{status:!0,message:"刪除成功"}),this.$emitter.emit("loadingStatus",!1),this.$emitter.emit("getOrderLsit"),this.hideModal()})).catch((e=>{this.$emitter.emit("loadingStatus",!1),this.hideModal(),console.log(e)}))},uploadImage(e){this.$emitter.emit("loadingStatus",!0);const t=new FormData;t.append("file",e.target.files[0]),(0,ne.y1)(t).then((e=>{this.tempData.constructionImageUrl=e.data.imageUrl,this.$emitter.emit("loadingStatus",!1)})).catch((e=>{this.$emitter.emit("loadingStatus",!1),console.log(e)}))},getVendors(){(0,ne.UP)().then((e=>{this.vendorList=e.data})).catch((e=>{console.log(e)}))},getEmployees(){(0,ne.o)().then((e=>{this.employList=e.data})).catch((e=>{console.log(e)}))},addEntriesArray(){this.tempData.timeEntries.push({});const e=this.tempData.timeEntries.length;this.tempData.timeEntries[e-1].startTime="08:00",this.tempData.timeEntries[e-1].endTime="17:00"},deleteEntriesArray(e){this.tempData.timeEntries.splice(e,1)},addTransArray(){this.tempData.temporaryWorkers.push({});const e=this.tempData.temporaryWorkers.length;this.tempData.temporaryWorkers[e-1].startTime="08:00",this.tempData.temporaryWorkers[e-1].endTime="17:00"},deleteTransArray(e){this.tempData.temporaryWorkers.splice(e,1)},showModal(){this.modal.show()},hideModal(){this.tempData={timeEntries:[],remainingPayment:0,temporaryWorkers:[]},this.modal.hide()}},mounted(){this.modal=new u.aF(this.$refs.addEditOrder),this.$emitter.on("addEditOrder",(e=>{this.status=e.status,e.status||(this.tempData=JSON.parse(JSON.stringify(e.data))),this.showModal()})),this.getVendors(),this.getEmployees()}};const jt=(0,F.A)(_t,[["render",Xt]]);var Nt=jt;const Pt={class:"modal fade",ref:"message",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",style:{"z-index":"99999"}},Jt={class:"modal-dialog"};function qt(e,t,a,o,n,s){return(0,h.uX)(),(0,h.CE)("div",Pt,[(0,h.Lk)("div",Jt,[(0,h.Lk)("div",{class:(0,f.C4)(["alert border-2 rounded-0",[n.status?"alert-dark border-dark":"alert-danger border-danger"]])},[(0,h.Lk)("i",{class:(0,f.C4)(["bi me-2",[n.status?"bi-check-square":"bi-exclamation-triangle"]])},null,2),(0,h.eW)((0,f.v_)(n.message),1)],2)])],512)}var Kt={data(){return{messageModal:"",message:"",status:!1}},methods:{openModal(){this.messageModal.toggle()}},mounted(){this.messageModal=new u.aF(this.$refs.message),this.$emitter.on("messageModal",(e=>{this.status=e.status,this.message=e.message,this.openModal()}))}};const Bt=(0,F.A)(Kt,[["render",qt]]);var zt=Bt;const Rt=e=>((0,h.Qi)("data-v-54c8b574"),e=e(),(0,h.jt)(),e),Zt={class:"vl-parent"},Qt=Rt((()=>(0,h.Lk)("div",{class:"loader"},null,-1)));function Gt(e,t,a,o,n,s){const l=(0,h.g2)("loading");return(0,h.uX)(),(0,h.CE)("div",Zt,[(0,h.bF)(l,{active:n.status,"can-cancel":!0,"is-full-page":n.fullPage},{default:(0,h.k6)((()=>[Qt])),_:1},8,["active","is-full-page"])])}var Yt={data(){return{status:!1,fullPage:!0}},components:{Loading:d()},mounted(){this.$emitter.on("loadingStatus",(e=>{this.status=e}))}};const Ht=(0,F.A)(Yt,[["render",Gt],["__scopeId","data-v-54c8b574"]]);var ea=Ht,ta={data(){return{height:""}},components:{Navbar:S,EmployeesModal:ie,VendorModal:We,InforModal:Qe,OrderModal:Nt,Message:zt,Loading:ea},mounted(){this.height=window.innerHeight-48}};const aa=(0,F.A)(ta,[["render",D]]);var oa=aa,na=a(5220);const sa=[{path:"/",name:"home",component:()=>a.e(46).then(a.bind(a,8046))},{path:"/order",name:"order",component:()=>a.e(358).then(a.bind(a,7358))},{path:"/employees",name:"employees",component:()=>a.e(4).then(a.bind(a,9004))},{path:"/company",name:"company",component:()=>a.e(97).then(a.bind(a,1097))},{path:"/login",name:"login",component:()=>a.e(398).then(a.bind(a,2398))}],la=(0,na.aE)({history:(0,na.Bt)(),routes:sa});var ia=la;Object.keys(s).forEach((e=>{"function"===typeof s[e]&&(0,n.Km)(e,s[e])})),(0,n.jK)({generateMessage:(0,l.kg)({zh_TW:i}),validateOnInput:!0}),(0,l.xS)("zh_TW");const ra=(0,m.A)(),da=(0,o.Ef)(oa);da.config.globalProperties.$emitter=ra,da.component("VField",n.D0),da.component("VForm",n.lV),da.component("ErrorMessage",n.Kw),da.use(r.LoadingPlugin),da.use(p.A,c.A),da.use(ia),da.mount("#app")}},t={};function a(o){var n=t[o];if(void 0!==n)return n.exports;var s=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(s.exports,s,s.exports,a),s.loaded=!0,s.exports}a.m=e,function(){a.amdO={}}(),function(){var e=[];a.O=function(t,o,n,s){if(!o){var l=1/0;for(m=0;m<e.length;m++){o=e[m][0],n=e[m][1],s=e[m][2];for(var i=!0,r=0;r<o.length;r++)(!1&s||l>=s)&&Object.keys(a.O).every((function(e){return a.O[e](o[r])}))?o.splice(r--,1):(i=!1,s<l&&(l=s));if(i){e.splice(m--,1);var d=n();void 0!==d&&(t=d)}}return t}s=s||0;for(var m=e.length;m>0&&e[m-1][2]>s;m--)e[m]=e[m-1];e[m]=[o,n,s]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,o){return a.f[o](e,t),t}),[]))}}(),function(){a.u=function(e){return"js/"+e+"."+{4:"d57861a7",46:"d62d44da",97:"b7f1b9ae",358:"81040ef3",398:"aa64289b"}[e]+".js"}}(),function(){a.miniCssF=function(e){return"css/"+e+".b9475a48.css"}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.hmd=function(e){return e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e}}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="web:";a.l=function(o,n,s,l){if(e[o])e[o].push(n);else{var i,r;if(void 0!==s)for(var d=document.getElementsByTagName("script"),m=0;m<d.length;m++){var u=d[m];if(u.getAttribute("src")==o||u.getAttribute("data-webpack")==t+s){i=u;break}}i||(r=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack",t+s),i.src=o),e[o]=[n];var c=function(t,a){i.onerror=i.onload=null,clearTimeout(p);var n=e[o];if(delete e[o],i.parentNode&&i.parentNode.removeChild(i),n&&n.forEach((function(e){return e(a)})),t)return t(a)},p=setTimeout(c.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=c.bind(null,i.onerror),i.onload=c.bind(null,i.onload),r&&document.head.appendChild(i)}}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p=""}(),function(){if("undefined"!==typeof document){var e=function(e,t,o,n,s){var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",a.nc&&(l.nonce=a.nc);var i=function(a){if(l.onerror=l.onload=null,"load"===a.type)n();else{var o=a&&a.type,i=a&&a.target&&a.target.href||t,r=new Error("Loading CSS chunk "+e+" failed.\n("+o+": "+i+")");r.name="ChunkLoadError",r.code="CSS_CHUNK_LOAD_FAILED",r.type=o,r.request=i,l.parentNode&&l.parentNode.removeChild(l),s(r)}};return l.onerror=l.onload=i,l.href=t,o?o.parentNode.insertBefore(l,o.nextSibling):document.head.appendChild(l),l},t=function(e,t){for(var a=document.getElementsByTagName("link"),o=0;o<a.length;o++){var n=a[o],s=n.getAttribute("data-href")||n.getAttribute("href");if("stylesheet"===n.rel&&(s===e||s===t))return n}var l=document.getElementsByTagName("style");for(o=0;o<l.length;o++){n=l[o],s=n.getAttribute("data-href");if(s===e||s===t)return n}},o=function(o){return new Promise((function(n,s){var l=a.miniCssF(o),i=a.p+l;if(t(l,i))return n();e(o,i,null,n,s)}))},n={524:0};a.f.miniCss=function(e,t){var a={46:1};n[e]?t.push(n[e]):0!==n[e]&&a[e]&&t.push(n[e]=o(e).then((function(){n[e]=0}),(function(t){throw delete n[e],t})))}}}(),function(){var e={524:0};a.f.j=function(t,o){var n=a.o(e,t)?e[t]:void 0;if(0!==n)if(n)o.push(n[2]);else{var s=new Promise((function(a,o){n=e[t]=[a,o]}));o.push(n[2]=s);var l=a.p+a.u(t),i=new Error,r=function(o){if(a.o(e,t)&&(n=e[t],0!==n&&(e[t]=void 0),n)){var s=o&&("load"===o.type?"missing":o.type),l=o&&o.target&&o.target.src;i.message="Loading chunk "+t+" failed.\n("+s+": "+l+")",i.name="ChunkLoadError",i.type=s,i.request=l,n[1](i)}};a.l(l,r,"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,o){var n,s,l=o[0],i=o[1],r=o[2],d=0;if(l.some((function(t){return 0!==e[t]}))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(r)var m=r(a)}for(t&&t(o);d<l.length;d++)s=l[d],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(m)},o=self["webpackChunkweb"]=self["webpackChunkweb"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=a.O(void 0,[504],(function(){return a(5529)}));o=a.O(o)})();
//# sourceMappingURL=app.79c0d36b.js.map