(function(){"use strict";var t={5044:function(t,e,a){a.d(e,{B1:function(){return d},Ck:function(){return u},IP:function(){return b},Jh:function(){return p},LW:function(){return y},Mu:function(){return r},Mz:function(){return $},PX:function(){return x},RJ:function(){return f},TA:function(){return _},Vh:function(){return g},WA:function(){return v},WD:function(){return D},fy:function(){return h},i3:function(){return i},mL:function(){return n},nx:function(){return l},pk:function(){return w},rO:function(){return m},w_:function(){return k},yb:function(){return c}});var s=a(5121);const o="https://skcompoany.zeabur.app",n=()=>s.Z.get(`${o}/admin/workers`),l=t=>s.Z.post(`${o}/admin/worker`,t),i=t=>s.Z.patch(`${o}/admin/worker`,t),r=t=>s.Z.delete(`${o}/admin/worker/${t}`),d=t=>s.Z.get(`${o}/admin/workerList/${t}`),m=()=>s.Z.get(`${o}/admin/companys`),c=t=>s.Z.post(`${o}/admin/company`,t),u=t=>s.Z.patch(`${o}/admin/company`,t),p=t=>s.Z.delete(`${o}/admin/company/${t}`),h=t=>s.Z.get(`${o}/admin/cooperateList/${t}`),f=t=>s.Z.get(`${o}/admin/orders`,{params:t}),b=t=>s.Z.get(`${o}/admin/order/${t}`),g=t=>s.Z.post(`${o}/admin/order`,t),_=t=>s.Z.patch(`${o}/admin/orderStatus`,t),v=t=>s.Z.patch(`${o}/admin/order`,t),y=t=>s.Z.delete(`${o}/admin/order/${t}`),k=()=>s.Z.get(`${o}/admin/todos`),w=t=>s.Z.post(`${o}/admin/todo`,t),D=t=>s.Z.patch(`${o}/admin/todo`,t),x=t=>s.Z.delete(`${o}/admin/todo/${t}`),$=t=>s.Z.post(`${o}/admin/sign_in`,t)},8769:function(t,e,a){a.d(e,{LP:function(){return s},qz:function(){return o}});const s=()=>{const t=document.cookie.replace(/(?:(?:^|.*;\s*)admin\s*=\s*([^;]*).*$)|^.*$/,"$1");return t},o=()=>{document.cookie="admin=;expires=;path=/"}},6602:function(t,e,a){var s=a(9963),o=a(2954),n=a(2387),l=a(6391),i=a(2389),r=a(2369),d=a.n(r),m=a(9391),c=a(8877),u=a(5121),p=a(2346);function h(t){const e=t.toString().split(".");return e[0]=e[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),e.join(".")}var f=a(6252);const b={class:"container-xl"};function g(t,e,a,s,o,n){const l=(0,f.up)("Navbar"),i=(0,f.up)("router-view"),r=(0,f.up)("Loading"),d=(0,f.up)("Message"),m=(0,f.up)("WorkRecordModal"),c=(0,f.up)("AddEditCompany"),u=(0,f.up)("AddEditOrder"),p=(0,f.up)("AddEditWorker"),h=(0,f.up)("PDF"),g=(0,f.up)("EditOrder"),_=(0,f.up)("CooperateModal");return(0,f.wg)(),(0,f.iD)(f.HY,null,[(0,f.Wm)(l),(0,f._)("section",b,[(0,f.Wm)(i)]),(0,f.Wm)(r),(0,f.Wm)(d),(0,f.Wm)(m),(0,f.Wm)(c),(0,f.Wm)(u),(0,f.Wm)(p),(0,f.Wm)(h),(0,f.Wm)(g),(0,f.Wm)(_)],64)}a(560);var _=a(3577);const v={class:"navbar navbar-expand-lg bg-dark border-bottom border-body","data-bs-theme":"dark"},y={class:"container"},k=(0,f._)("a",{class:"navbar-brand",href:"#"},"首頁",-1),w=(0,f._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,f._)("span",{class:"navbar-toggler-icon"})],-1),D={class:"collapse navbar-collapse",id:"navbarSupportedContent"},x={class:"navbar-nav me-auto mb-2 mb-lg-0"},$={class:"nav-item"},M={class:"nav-item"},W={class:"nav-item"},O={class:"nav-item"},C={class:"nav-item"};function S(t,e,a,s,o,n){const l=(0,f.up)("router-link");return(0,f.wg)(),(0,f.iD)("nav",v,[(0,f._)("div",y,[k,w,(0,f._)("div",D,[(0,f._)("ul",x,[(0,f._)("li",$,[(0,f._)("a",{class:(0,_.C_)(["nav-link",{active:"home"===o.path}]),"aria-current":"page",href:"#"},"Home",2)]),(0,f._)("li",M,[(0,f.Wm)(l,{to:"/demo",class:(0,_.C_)(["nav-link",{active:"demo"===o.path}])},{default:(0,f.w5)((()=>[(0,f.Uk)("demo")])),_:1},8,["class"])]),(0,f._)("li",W,[(0,f.Wm)(l,{to:"/newOrder",class:(0,_.C_)(["nav-link",{active:"order"===o.path}])},{default:(0,f.w5)((()=>[(0,f.Uk)("工單")])),_:1},8,["class"])]),(0,f._)("li",O,[(0,f.Wm)(l,{to:"/personnel",class:(0,_.C_)(["nav-link",{active:"personnel"===o.path}])},{default:(0,f.w5)((()=>[(0,f.Uk)("員工")])),_:1},8,["class"])]),(0,f._)("li",C,[(0,f.Wm)(l,{to:"/company",class:(0,_.C_)(["nav-link",{active:"company"===o.path}])},{default:(0,f.w5)((()=>[(0,f.Uk)("廠商")])),_:1},8,["class"])])]),(0,f._)("button",{class:"btn btn-outline-success",type:"button",onClick:e[0]||(e[0]=(...t)=>n.signOut&&n.signOut(...t))},"登出")])])])}var V=a(8769),U={data(){return{path:""}},watch:{$route(){this.path=this.$route.name}},methods:{signOut(){(0,V.qz)(),this.$router.push("/login")}},mounted(){this.path=this.$route.name}},E=a(3744);const L=(0,E.Z)(U,[["render",S]]);var I=L;const P=t=>((0,f.dD)("data-v-5de688a9"),t=t(),(0,f.Cn)(),t),Z={class:"vl-parent"},N=P((()=>(0,f._)("div",{class:"loader"},null,-1)));function j(t,e,a,s,o,n){const l=(0,f.up)("loading");return(0,f.wg)(),(0,f.iD)("div",Z,[(0,f.Wm)(l,{active:o.status,"can-cancel":!0,"is-full-page":o.fullPage},{default:(0,f.w5)((()=>[N])),_:1},8,["active","is-full-page"])])}var A={data(){return{status:!1,fullPage:!0}},components:{Loading:d()},mounted(){this.$emitter.on("loadingStatus",(t=>{this.status=t}))}};const z=(0,E.Z)(A,[["render",j],["__scopeId","data-v-5de688a9"]]);var q=z;const F={class:"modal fade",ref:"message",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},T={class:"modal-dialog"};function R(t,e,a,s,o,n){return(0,f.wg)(),(0,f.iD)("div",F,[(0,f._)("div",T,[(0,f._)("div",{class:(0,_.C_)(["alert border-2 rounded-0",[o.status?"alert-dark border-dark":"alert-danger border-danger"]])},[(0,f._)("i",{class:(0,_.C_)(["bi me-2",[o.status?"bi-check-square":"bi-exclamation-triangle"]])},null,2),(0,f.Uk)((0,_.zw)(o.message),1)],2)])],512)}var J={data(){return{messageModal:"",message:"",status:!1}},methods:{openModal(){this.messageModal.toggle()}},mounted(){this.messageModal=new c.u_(this.$refs.message),this.$emitter.on("messageModal",(t=>{this.status=t.status,this.message=t.message,this.openModal()}))}};const B=(0,E.Z)(J,[["render",R]]);var H=B;const Y={class:"modal fade",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"workRecordModal"},G={class:"modal-dialog modal-fullscreen-xl-down"},K={class:"modal-content"},Q=(0,f._)("div",{class:"modal-header"},[(0,f._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),X={class:"modal-body"},tt={class:"table table-striped"},et=(0,f._)("thead",null,[(0,f._)("tr",null,[(0,f._)("th",{scope:"col"},"#"),(0,f._)("th",{scope:"col"},"工程名稱"),(0,f._)("th",{scope:"col"},"日期"),(0,f._)("th",{scope:"col"},"時數")])],-1),at={scope:"row"},st=["onClick"],ot=(0,f._)("td",{colspan:"3"},"總累積時數：",-1),nt={key:0},lt={class:"row g-3"},it={class:"col-md-6"},rt=(0,f._)("label",{for:"inputEmail4",class:"form-label"},"廠商名稱",-1),dt={class:"col-md-6"},mt=(0,f._)("label",{for:"inputPassword4",class:"form-label"},"負責人",-1),ct={class:"col-12"},ut=(0,f._)("label",{for:"inputAddress",class:"form-label"},"施工地址",-1),pt={class:"col-md-6"},ht=(0,f._)("label",{for:"inputAddress2",class:"form-label"},"工程日期",-1),ft={class:"col-md-6"},bt={key:0},gt={key:1};function _t(t,e,a,o,n,l){return(0,f.wg)(),(0,f.iD)("div",Y,[(0,f._)("div",G,[(0,f._)("div",K,[Q,(0,f._)("div",X,[(0,f._)("table",tt,[et,(0,f._)("tbody",null,[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(n.tempData,((t,e)=>((0,f.wg)(),(0,f.iD)("tr",{key:e},[(0,f._)("th",at,(0,_.zw)(e+1),1),(0,f._)("td",null,[(0,f._)("button",{class:"btn btn-dark",onClick:e=>l.getOrder(t._id)},(0,_.zw)(t._id),9,st)]),(0,f._)("td",null,(0,_.zw)(t.constructionDate),1),(0,f._)("td",null,(0,_.zw)(t.time),1)])))),128)),(0,f._)("tr",null,[ot,(0,f._)("td",null,(0,_.zw)(n.times),1)])])]),n.tempOrder?((0,f.wg)(),(0,f.iD)("div",nt,[(0,f._)("form",lt,[(0,f._)("div",it,[rt,(0,f.wy)((0,f._)("input",{type:"text",class:"form-control",id:"inputEmail4",disabled:"","onUpdate:modelValue":e[0]||(e[0]=t=>n.tempOrder.company.companyName=t)},null,512),[[s.nr,n.tempOrder.company.companyName]])]),(0,f._)("div",dt,[mt,(0,f.wy)((0,f._)("input",{type:"text",class:"form-control",id:"inputPassword4","onUpdate:modelValue":e[1]||(e[1]=t=>n.tempOrder.company.name=t),disabled:""},null,512),[[s.nr,n.tempOrder.company.name]])]),(0,f._)("div",ct,[ut,(0,f.wy)((0,f._)("input",{type:"text",class:"form-control",id:"inputAddress","onUpdate:modelValue":e[2]||(e[2]=t=>n.tempOrder.address=t),disabled:""},null,512),[[s.nr,n.tempOrder.address]])]),(0,f._)("div",pt,[ht,(0,f.wy)((0,f._)("input",{type:"text",class:"form-control",id:"inputAddress2",disabled:"","onUpdate:modelValue":e[3]||(e[3]=t=>n.tempOrder.constructionDate=t)},null,512),[[s.nr,n.tempOrder.constructionDate]])]),(0,f._)("div",ft,[(0,f._)("button",{class:(0,_.C_)(["btn",[n.tempOrder.status?"btn-outline-success":"btn-outline-danger"]]),disabled:""},[n.tempOrder.status?((0,f.wg)(),(0,f.iD)("span",bt,"完工")):((0,f.wg)(),(0,f.iD)("span",gt,"未完工"))],2)])])])):(0,f.kq)("",!0)])])])],512)}var vt=a(5044),yt={data(){return{modal:"",tempData:"",times:0,tempOrder:""}},methods:{getOrder(t){this.$emitter.emit("loadingStatus",!0),(0,vt.IP)(t).then((t=>{this.$emitter.emit("loadingStatus",!1),this.tempOrder=t.data.data})).catch((t=>{console.log(t),this.$emitter.emit("loadingStatus",!1)}))},getWorkerList(t){this.$emitter.emit("loadingStatus",!0),(0,vt.B1)(t).then((t=>{this.tempData=t.data.data,this.$emitter.emit("loadingStatus",!1),this.totalTime()})).catch((t=>{console.log(t),this.$emitter.emit("loadingStatus",!0)}))},totalTime(){this.times=0,this.tempData.forEach((t=>{this.times+=t.time}))},showModal(){this.modal.show()}},mounted(){this.modal=new c.u_(this.$refs.workRecordModal),this.$emitter.on("workerList",(t=>{this.tempOrder="",this.getWorkerList(t),this.showModal()}))}};const kt=(0,E.Z)(yt,[["render",_t]]);var wt=kt;const Dt={class:"modal fade",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"pdfModal"},xt={class:"modal-dialog modal-xl"},$t={class:"modal-content"},Mt=(0,f._)("div",{class:"modal-header"},[(0,f._)("h1",{class:"modal-title fs-5"},"Modal title"),(0,f._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Wt={class:"modal-body"},Ot={ref:"pdf",class:"px-5 py-0"},Ct=(0,f._)("h1",{class:"text-center mb-5"},"工程承攬合約書",-1),St={class:"h4 d-flex ms-5 mb-5"},Vt=(0,f._)("div",null,"立合約書人：",-1),Ut={class:"d-flex flex-column"},Et=(0,f._)("div",{class:"mb-3"},"業主＿＿＿公司(以下稱甲方)",-1),Lt={class:"text-info px-3 text-decoration-underline"},It=(0,f._)("div",{class:"h4 mb-5"}," 茲因乙方承包甲方______工程，雙方同意訂定合約條款如下，以資互相遵守: ",-1),Pt={class:"list-unstyled h5 mb-5"},Zt={class:"mb-4"},Nt={class:"text-info px-3 text-decoration-underline"},jt=(0,f._)("li",{class:"mb-4"}," 二、 工程圖說明:乙方應按經甲方認可之設計圖說規格切實施工。(圖說如附件) ",-1),At=(0,f._)("li",{class:"mb-4"}," 三、 工程材料:本工程須按設計圖及施工說明書中所註明之材料施工，甲方得隨時派人監工。 ",-1),zt=(0,f._)("li",{class:"mb-4"}," 四、 施工期限:自民國 年 月 日起至民國 年 月 日止， 共計 工作天。 ",-1),qt={class:"mb-4"},Ft={class:"text-info px-3 text-decoration-underline"},Tt=(0,f.uE)('<li class="mb-4"> 六、 付款辦法: <ul class="list-unstyled ps-5"><li class="mb-2"> (1)本契約訂定之日給付工程總價三○%計新台幣__元整。 </li><li class="mb-2"> (2)工程完成四成時給付工程總價四○%計新台幣__元整。 </li><li class="mb-2"> (3)工程完成八成時給付工程總價二五%計新台幣__元整。 </li><li class="mb-2">(4)工程完成驗收後付清工程尾款。</li><li class="mb-2">(5)付款方式以現款付之。</li><li class="mb-2"> (6)上列四項付款期限如甲方故意遲延給付時，乙方對以後工程得自動停止 進行。其停止期間不計入第四條之施工期限內。 </li></ul></li><li class="mb-4"><div class="d-flex"><div class="text-nowrap">七、 工程變更:</div><div> 甲方認為本工程其中部份有變更之必要時，得通知乙方辦理，因 工程變更而有數量之增減時，其工程費之計算，仍以估價單內所 列單價為準，如有新增項目，應由雙方共同議定合理之單價。是 項增減工程價款及付款方式經雙方議定後，用書面附入本合約內 作為附件。 </div></div></li><li class="mb-4"> 八、 工程意外: <ul class="list-unstyled ps-4"><li class="mb-2"> (1) 本工程進行中因乙方之疏忽及過失，以致損害他人之身體或財產時，乙 方應付賠償責任。但因不可抗力之損失者不在此限。 </li><li> (2) 施工期間如遇天災地變等非人為因素之變故，亦不在此限。 </li></ul></li><li class="mb-4"><div class="d-flex"><div class="text-nowrap">九、 工程配合:</div><div> 本工程由甲方供給之材料或他包之配合工程，如未能按期供應或 未能按期施工，致使乙方之工程進度滯緩時，得依遲緩日數延長 本工程施工期限。 </div></div></li><li class="mb-4"><div class="d-flex"><div class="text-nowrap">十、 工程驗收:</div><div>工程完成後，甲方應於三天內驗收完畢，不得拖延。</div></div></li>',5),Rt=(0,f.uE)('<div class="h4 mb-2"> 本契約壹式貳份，由甲乙雙方各執乙份為憑。 </div><div class="h4 mb-5"> 如有未盡事宜，雙方以誠實合理商獲協議以書面補充之。 </div><div class="h4 mb-5"><div class="mb-3 h3">業主(即甲方)</div><div class="mb-3">公司名稱:</div><div class="mb-3">代表人:</div><div class="mb-3">統一編號:</div><div class="mb-3">地址:</div><div class="mb-3">電話:</div></div>',3),Jt={class:"h4 mb-5"},Bt=(0,f._)("div",{class:"mb-3 h3"},"承包商(即乙方)",-1),Ht={class:"mb-3"},Yt={class:"ms-2 fw-bolder text-info"},Gt={class:"mb-3"},Kt={class:"ms-2 fw-bolder text-info"},Qt={class:"mb-3"},Xt={class:"ms-2 fw-bolder text-info"},te={class:"mb-3"},ee={class:"ms-2 fw-bolder text-info"},ae={class:"mb-3"},se={class:"ms-2 fw-bolder text-info"},oe=(0,f.uE)('<div class="text-center h3 text-nowrap"><span class="mx-5">中</span><span class="mx-5">華</span><span class="mx-5">民</span><span class="mx-5">國</span><span class="mx-5">年</span><span class="mx-5">月</span><span class="mx-5">日</span></div><div class="text-nowrap text-center h6">_</div>',2),ne={class:"modal-footer"};function le(t,e,a,s,o,n){return(0,f.wg)(),(0,f.iD)("div",Dt,[(0,f._)("div",xt,[(0,f._)("div",$t,[Mt,(0,f._)("div",Wt,[(0,f._)("section",null,[(0,f._)("div",Ot,[Ct,(0,f._)("div",St,[Vt,(0,f._)("div",Ut,[Et,(0,f._)("div",null,[(0,f.Uk)(" 承包商"),(0,f._)("span",Lt,(0,_.zw)(o.tempCompany.companyName),1),(0,f.Uk)("公司(以下稱乙方) ")])])]),It,(0,f._)("ul",Pt,[(0,f._)("li",Zt,[(0,f.Uk)(" 一、 工程位置:本件工程座落於 "),(0,f._)("span",Nt,(0,_.zw)(o.tempData.address),1)]),jt,At,zt,(0,f._)("li",qt,[(0,f.Uk)(" 五、 工程總價:新台幣"),(0,f._)("span",Ft,(0,_.zw)(o.tempData.total),1),(0,f.Uk)("元整。 ")]),Tt]),Rt,(0,f._)("div",Jt,[Bt,(0,f._)("div",Ht,[(0,f.Uk)(" 公司名稱:"),(0,f._)("span",Yt,(0,_.zw)(o.tempCompany.companyName),1)]),(0,f._)("div",Gt,[(0,f.Uk)(" 代表人:"),(0,f._)("span",Kt,(0,_.zw)(o.tempCompany.name),1)]),(0,f._)("div",Qt,[(0,f.Uk)(" 統一編號:"),(0,f._)("span",Xt,(0,_.zw)(o.tempCompany.taxIdNumber),1)]),(0,f._)("div",te,[(0,f.Uk)(" 地址:"),(0,f._)("span",ee,(0,_.zw)(o.tempCompany.address),1)]),(0,f._)("div",ae,[(0,f.Uk)(" 電話:"),(0,f._)("span",se,(0,_.zw)(o.tempCompany.taxIdNumber),1)])]),oe],512)])]),(0,f._)("div",ne,[(0,f._)("button",{class:"btn btn-dark",onClick:e[0]||(e[0]=t=>n.download())},"Download PDF")])])])],512)}var ie=a(4730),re=a(1120),de={data(){return{pdfModal:"",tempData:{},tempCompany:{}}},methods:{download(){const t=595.28,e=841.89;re(this.$refs.pdf,{scale:2,useCORS:!0,backgroundColor:"#fff"}).then((a=>{const s=a.width/t*e;let o=a.height,n=0;const l=t,i=t/a.width*a.height,r=a.toDataURL("image/jpeg",1),d=new ie.kH("p","pt","a4");if(o<s)d.addImage(r,"JPEG",0,0,l,i);else while(o>0)d.addImage(r,"JPEG",0,n,l,i),o-=s,n-=e,o>0&&d.addPage();d.save("test.pdf")}))},showModal(){this.pdfModal.show()}},mounted(){this.pdfModal=new c.u_(this.$refs.pdfModal),this.$emitter.on("pdfEmit",(t=>{this.tempData=t,this.tempCompany=this.tempData.company,this.showModal()}))}};const me=(0,E.Z)(de,[["render",le]]);var ce=me;const ue={class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"AddEdit"},pe={class:"modal-dialog"},he={class:"modal-content"},fe={class:"modal-header"},be={class:"modal-title fs-5",id:"exampleModalLabel"},ge={key:0},_e={key:1},ve={class:"modal-body"},ye={class:"form-floating mb-3"},ke={for:"floatingInput"},we={class:"form-floating mb-3"},De={for:"floatingInput"},xe={class:"form-floating mb-3"},$e={for:"phone"},Me={class:"form-floating mb-3"},We={for:"floatingInput"},Oe={class:"form-floating mb-3"},Ce={for:"floatingInput"},Se={class:"modal-footer justify-content-between"},Ve=(0,f._)("div",null,null,-1),Ue=["disabled"];function Ee(t,e,a,s,o,n){const l=(0,f.up)("VField"),i=(0,f.up)("ErrorMessage"),r=(0,f.up)("error-message"),d=(0,f.up)("VForm");return(0,f.wg)(),(0,f.iD)("div",ue,[(0,f._)("div",pe,[(0,f._)("div",he,[(0,f._)("div",fe,[(0,f._)("h1",be,[o.status?((0,f.wg)(),(0,f.iD)("span",ge,"新增公司")):((0,f.wg)(),(0,f.iD)("span",_e,"修改公司"))]),(0,f._)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...t)=>n.hideModal&&n.hideModal(...t)),"aria-label":"Close"})]),(0,f.Wm)(d,{ref:"formRefSignin",id:"profileForm",onSubmit:n.addEditCompany},{default:(0,f.w5)((({errors:t,meta:a})=>[(0,f._)("div",ve,[(0,f._)("div",ye,[(0,f.Wm)(l,{name:"廠商",type:"text",rules:"required",class:"form-control",modelValue:o.tempData.companyName,"onUpdate:modelValue":e[1]||(e[1]=t=>o.tempData.companyName=t)},null,8,["modelValue"]),(0,f._)("label",ke,[(0,f.Uk)("廠商名稱"),(0,f.Wm)(i,{name:"廠商",class:"text-danger ms-3"})])]),(0,f._)("div",we,[(0,f.Wm)(l,{name:"負責人",type:"text",rules:"required",class:"form-control",modelValue:o.tempData.name,"onUpdate:modelValue":e[2]||(e[2]=t=>o.tempData.name=t)},null,8,["modelValue"]),(0,f._)("label",De,[(0,f.Uk)("負責人名稱"),(0,f.Wm)(i,{name:"負責人",class:"text-danger ms-3"})])]),(0,f._)("div",xe,[(0,f.Wm)(l,{id:"phone",name:"phone",type:"text",class:(0,_.C_)(["form-control",{"is-invalid":t["電話"]}]),rules:n.isPhone,modelValue:o.tempData.phone,"onUpdate:modelValue":e[3]||(e[3]=t=>o.tempData.phone=t)},null,8,["class","rules","modelValue"]),(0,f._)("label",$e,[(0,f.Uk)("phone"),(0,f.Wm)(r,{name:"phone",class:"text-danger ms-3"})])]),(0,f._)("div",Me,[(0,f.Wm)(l,{name:"統一編號",class:"form-control",type:"text",rules:{regex:/^[0-9]{8}$/},modelValue:o.tempData.taxIdNumber,"onUpdate:modelValue":e[4]||(e[4]=t=>o.tempData.taxIdNumber=t)},null,8,["modelValue"]),(0,f._)("label",We,[(0,f.Uk)("統一編號"),(0,f.Wm)(i,{name:"統一編號",class:"ms-3 text-danger"})])]),(0,f._)("div",Oe,[(0,f.Wm)(l,{name:"地址",type:"text",modelValue:o.tempData.address,"onUpdate:modelValue":e[5]||(e[5]=t=>o.tempData.address=t),class:"form-control"},null,8,["modelValue"]),(0,f._)("label",Ce,[(0,f.Uk)("地址"),(0,f.Wm)(i,{name:"地址",class:"text-danger ms-3"})])])]),(0,f._)("div",Se,[o.status?(0,f.kq)("",!0):((0,f.wg)(),(0,f.iD)("button",{key:0,type:"button",class:"btn btn-outline-danger",onClick:e[6]||(e[6]=(...t)=>n.deleteCompany&&n.deleteCompany(...t))}," 刪除廠商資料 ")),Ve,(0,f._)("button",{type:"submit",class:"btn btn-primary",disabled:!a.valid},"儲存",8,Ue)])])),_:1},8,["onSubmit"])])])],512)}var Le={data(){return{modal:"",status:!1,tempData:{companyName:"",name:"",phone:"",taxIdNumber:"",address:""}}},methods:{isPhone(t){const e=/^(09)[0-9]{8}$/;return!!e.test(t)||"需要正確的電話號碼"},addEditCompany(){this.$emitter.emit("loadingStatus",!0),this.tempData._id?(0,vt.Ck)(this.tempData).then((()=>{this.$emitter.emit("messageModal",{status:!0,message:"修改成功"}),this.$emitter.emit("getCompanyLsit"),this.$emitter.emit("loadingStatus",!1),this.hideModal()})).catch((t=>{this.$emitter.emit("messageModal",{status:!1,message:t.response.data.message}),this.$emitter.emit("loadingStatus",!1)})):(0,vt.yb)(this.tempData).then((()=>{this.$emitter.emit("messageModal",{status:!0,message:"新增成功"}),this.$emitter.emit("getCompanyLsit"),this.$emitter.emit("loadingStatus",!1),this.hideModal()})).catch((t=>{this.$emitter.emit("messageModal",{status:!1,message:t.response.data.message}),this.$emitter.emit("loadingStatus",!1)}))},deleteCompany(){const t=prompt(`輸入該廠商ＩＤ：${this.tempData._id}`,"");t===this.tempData._id&&(0,vt.Jh)(this.tempData._id).then((()=>{this.$emitter.emit("messageModal",{status:!0,message:"刪除成功"}),this.$emitter.emit("getCompanyLsit"),this.$emitter.emit("loadingStatus",!1),this.hideModal()})).catch((t=>{this.$emitter.emit("messageModal",{status:!1,message:t.response.data.message}),this.$emitter.emit("loadingStatus",!1)}))},showModal(){this.modal.show()},hideModal(){this.tempData={},this.modal.hide()}},mounted(){this.modal=new c.u_(this.$refs.AddEdit),this.$emitter.on("addEditCom",(t=>{this.status=t.status,t.status||(this.tempData=JSON.parse(JSON.stringify(t.data))),this.showModal()}))}};const Ie=(0,E.Z)(Le,[["render",Ee]]);var Pe=Ie;const Ze={class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"AddEdit"},Ne={class:"modal-dialog"},je={class:"modal-content"},Ae={class:"modal-header"},ze={class:"modal-title fs-5",id:"exampleModalLabel"},qe={key:0},Fe={key:1},Te={class:"modal-body"},Re={class:"form-floating mb-3"},Je={id:"datalistOptions"},Be=["value"],He={for:"floatingInput"},Ye={class:"form-floating mb-3"},Ge={for:"floatingInput"},Ke={class:"form-floating mb-3"},Qe={for:"floatingInput"},Xe={class:"form-floating mb-3"},ta=(0,f._)("option",{value:"現金"},"現金",-1),ea=(0,f._)("option",{value:"支票"},"支票",-1),aa={for:"floatingInput"},sa={class:"form-floating mb-3"},oa={for:"floatingInput"},na={class:"form-floating mb-3"},la={for:"floatingInput"},ia={class:"modal-footer justify-content-between"},ra=(0,f._)("div",null,null,-1),da=["disabled"];function ma(t,e,a,s,o,n){const l=(0,f.up)("VField"),i=(0,f.up)("ErrorMessage"),r=(0,f.up)("VForm");return(0,f.wg)(),(0,f.iD)("div",Ze,[(0,f._)("div",Ne,[(0,f._)("div",je,[(0,f._)("div",Ae,[(0,f._)("h1",ze,[o.status?((0,f.wg)(),(0,f.iD)("span",qe,"新增工單")):((0,f.wg)(),(0,f.iD)("span",Fe,"修改工單"))]),(0,f._)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...t)=>n.hideModal&&n.hideModal(...t)),"aria-label":"Close"})]),(0,f.Wm)(r,{ref:"formRefSignin",id:"profileForm",onSubmit:n.addEditOrder},{default:(0,f.w5)((({meta:a})=>[(0,f._)("div",Te,[(0,f._)("section",null,[(0,f._)("div",Re,[(0,f.Wm)(l,{name:"廠商",type:"text",rules:n.isCompanyExist,class:"form-control",list:"datalistOptions"},null,8,["rules"]),(0,f._)("datalist",Je,[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(o.companyList,((t,e)=>((0,f.wg)(),(0,f.iD)("option",{key:e,value:t.companyName},null,8,Be)))),128))]),(0,f._)("label",He,[(0,f.Uk)("廠商名稱"),(0,f.Wm)(i,{name:"廠商",class:"text-danger ms-3"})])]),(0,f._)("div",Ye,[(0,f.Wm)(l,{name:"施工地址",rules:"required",type:"text",modelValue:o.tempData.address,"onUpdate:modelValue":e[1]||(e[1]=t=>o.tempData.address=t),class:"form-control"},null,8,["modelValue"]),(0,f._)("label",Ge,[(0,f.Uk)("施工地址"),(0,f.Wm)(i,{name:"施工地址",class:"text-danger ms-3"})])]),(0,f._)("div",Ke,[(0,f.Wm)(l,{name:"施工日期",rules:"required",type:"date",modelValue:o.tempData.constructionDate,"onUpdate:modelValue":e[2]||(e[2]=t=>o.tempData.constructionDate=t),class:"form-control"},null,8,["modelValue"]),(0,f._)("label",Qe,[(0,f.Uk)("施工日期"),(0,f.Wm)(i,{name:"施工日期",class:"text-danger ms-3"})])]),(0,f._)("div",Xe,[(0,f.Wm)(l,{name:"付款方式",as:"select",rules:"required",class:"form-control",modelValue:o.tempData.paymentMethod,"onUpdate:modelValue":e[3]||(e[3]=t=>o.tempData.paymentMethod=t)},{default:(0,f.w5)((()=>[ta,ea])),_:1},8,["modelValue"]),(0,f._)("label",aa,[(0,f.Uk)("付款方式"),(0,f.Wm)(i,{name:"付款方式",class:"text-danger ms-3"})])]),(0,f._)("div",sa,[(0,f.Wm)(l,{name:"總金額",type:"number",rules:"required|min_value:0",modelValue:o.tempData.total,"onUpdate:modelValue":e[4]||(e[4]=t=>o.tempData.total=t),class:"form-control"},null,8,["modelValue"]),(0,f._)("label",oa,[(0,f.Uk)("總金額"),(0,f.Wm)(i,{name:"總金額",class:"text-danger ms-3"})])]),(0,f._)("div",na,[(0,f.Wm)(l,{name:"保留款",type:"number",rules:"required|min_value:0",modelValue:o.tempData.retainage,"onUpdate:modelValue":e[5]||(e[5]=t=>o.tempData.retainage=t),class:"form-control"},null,8,["modelValue"]),(0,f._)("label",la,[(0,f.Uk)("保留款"),(0,f.Wm)(i,{name:"保留款",class:"text-danger ms-3"})])])])]),(0,f._)("div",ia,[o.status?(0,f.kq)("",!0):((0,f.wg)(),(0,f.iD)("button",{key:0,type:"button",class:"btn btn-outline-danger",onClick:e[6]||(e[6]=e=>t.deleteOrder(o.tempData._id))}," 刪除該工單 ")),ra,(0,f._)("button",{type:"submit",class:"btn btn-primary",disabled:!a.valid}," 儲存 ",8,da)])])),_:1},8,["onSubmit"])])])],512)}var ca={data(){return{modal:"",status:!1,tempData:{address:"",company:"",status:0,paymentMethod:"",total:0,retainage:0,constructionDate:"",workers:[],transferWorkers:[]},tempWorker:[],companyList:[],workerList:[]}},watch:{},methods:{isCompanyExist(t){this.tempData.company="";let e="";return this.companyList.forEach((a=>{a.companyName===t&&(e=a.company,this.tempData.company=a._id)})),""!==e||"查無此廠商"},getCompany(){(0,vt.rO)().then((t=>{this.companyList=t.data.data})).catch((t=>{console.log(t)}))},getWorker(){(0,vt.mL)().then((t=>{this.workerList=t.data.data})).catch((t=>{console.log(t)}))},addEditOrder(){this.$emitter.emit("loadingStatus",!0),this.tempData._id?console.log("這是修改"):(0,vt.Vh)(this.tempData).then((()=>{this.hideModal(),this.$emitter.emit("getOrder"),this.$emitter.emit("loadingStatus",!1)})).catch((t=>{console.log(t),this.$emitter.emit("loadingStatus",!1)}))},addTransArray(){this.tempData.transferWorkers.push({})},deleteTransArray(t){this.tempData.transferWorkers.splice(t,1)},showModal(){this.modal.show()},hideModal(){this.tempData={address:"",company:"",status:0,paymentMethod:"",total:0,retainage:0,constructionDate:"",workers:[],transferWorkers:[]},this.modal.hide()}},mounted(){this.getCompany(),this.getWorker(),this.modal=new c.u_(this.$refs.AddEdit),this.$emitter.on("addEditOrder",(t=>{this.status=t.status,t.status||(this.tempData=JSON.parse(JSON.stringify(t.data))),this.showModal()}))}};const ua=(0,E.Z)(ca,[["render",ma]]);var pa=ua;const ha={class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"addEditWorker"},fa={class:"modal-dialog"},ba={class:"modal-content"},ga={class:"modal-header"},_a={class:"modal-title fs-5",id:"exampleModalLabel"},va={key:0},ya={key:1},ka={class:"modal-body"},wa={class:"form-floating mb-3"},Da={for:"floatingInput"},xa={class:"form-floating mb-3"},$a={for:"phone"},Ma={class:"form-floating mb-3"},Wa={for:"floatingInput"},Oa={class:"input-group mb-3"},Ca=(0,f._)("label",{for:"imageFront",class:"input-group-text"},"上傳身分證或居留證正面",-1),Sa=(0,f._)("div",{class:"input-group mb-3"},[(0,f._)("input",{type:"file",class:"form-control",accept:"image/*",id:"imageBack",name:"image"}),(0,f._)("label",{for:"imageBack",class:"input-group-text"},"上傳身分證或居留證反面")],-1),Va={class:"input-group mb-3"},Ua=(0,f._)("label",{class:"input-group-text",for:"inputGroupSelect01"},"員工職別",-1),Ea=(0,f._)("option",{value:"工人",selected:""},"工人",-1),La=(0,f._)("option",{value:"監工"},"監工",-1),Ia=(0,f._)("option",{value:"工地主任"},"工地主任",-1),Pa=(0,f._)("option",{value:"工頭"},"工頭",-1),Za=[Ea,La,Ia,Pa],Na={class:"input-group mb-3"},ja=(0,f._)("label",{for:"date",class:"input-group-text"},"入職日期",-1),Aa={class:"form-floating mb-3"},za={for:"floatingInput"},qa={class:"modal-footer justify-content-between"},Fa=(0,f._)("div",null,null,-1),Ta=["disabled"];function Ra(t,e,a,o,n,l){const i=(0,f.up)("VField"),r=(0,f.up)("ErrorMessage"),d=(0,f.up)("error-message"),m=(0,f.up)("VForm");return(0,f.wg)(),(0,f.iD)("div",ha,[(0,f._)("div",fa,[(0,f._)("div",ba,[(0,f._)("div",ga,[(0,f._)("h1",_a,[n.status?((0,f.wg)(),(0,f.iD)("span",va,"新增員工")):((0,f.wg)(),(0,f.iD)("span",ya,"修改員工"))]),(0,f._)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...t)=>l.hideModal&&l.hideModal(...t)),"aria-label":"Close"})]),(0,f.Wm)(m,{ref:"formRefSignin",id:"profileForm",onSubmit:l.addEditWorker},{default:(0,f.w5)((({errors:a,meta:o})=>[(0,f._)("div",ka,[(0,f._)("div",wa,[(0,f.Wm)(i,{name:"姓名",type:"text",rules:"required",class:"form-control",modelValue:n.tempData.name,"onUpdate:modelValue":e[1]||(e[1]=t=>n.tempData.name=t)},null,8,["modelValue"]),(0,f._)("label",Da,[(0,f.Uk)("員工姓名 "),(0,f.Wm)(r,{name:"姓名",class:"text-danger ms-3"})])]),(0,f._)("div",xa,[(0,f.Wm)(i,{id:"phone",name:"phone",type:"text",class:(0,_.C_)(["form-control",{"is-invalid":a["電話"]}]),rules:l.isPhone,modelValue:n.tempData.phone,"onUpdate:modelValue":e[2]||(e[2]=t=>n.tempData.phone=t)},null,8,["class","rules","modelValue"]),(0,f._)("label",$a,[(0,f.Uk)("phone"),(0,f.Wm)(d,{name:"phone",class:"text-danger ms-3"})])]),(0,f._)("div",Ma,[(0,f.Wm)(i,{name:"身分證字號或居留證",class:"form-control",type:"text",rules:{regex:/^[A-Z]{1}[1-2]{1}[0-9]{8}$/},modelValue:n.tempData.idNumber,"onUpdate:modelValue":e[3]||(e[3]=t=>n.tempData.idNumber=t)},null,8,["modelValue"]),(0,f._)("label",Wa,[(0,f.Uk)("身分證字號或居留證 "),(0,f.Wm)(r,{name:"身分證字號或居留證",class:"ms-3 text-danger"})])]),(0,f._)("div",Oa,[(0,f._)("input",{class:"form-control",type:"file",accept:"image/*",id:"imageFront",name:"image",onChange:e[4]||(e[4]=(...e)=>t.uploadImage&&t.uploadImage(...e))},null,32),Ca]),Sa,(0,f._)("div",Va,[Ua,(0,f.wy)((0,f._)("select",{class:"form-select",id:"inputGroupSelect01","onUpdate:modelValue":e[5]||(e[5]=t=>n.tempData.position=t)},Za,512),[[s.bM,n.tempData.position]])]),(0,f._)("div",Na,[ja,(0,f.wy)((0,f._)("input",{id:"date",name:"date",type:"date",placeholder:"Enter email",class:"form-control","onUpdate:modelValue":e[6]||(e[6]=t=>n.tempData.seniority=t)},null,512),[[s.nr,n.tempData.seniority]])]),(0,f._)("div",Aa,[(0,f.Wm)(i,{name:"時薪",type:"text",modelValue:n.tempData.hourlyRate,"onUpdate:modelValue":e[7]||(e[7]=t=>n.tempData.hourlyRate=t),rules:{regex:/^(([^0][0-9]+|0)\.([0-9])$)|^(([^0][0-9]+|0)$)|^(([1-9]+)\.([0-9])$)|^(([1-9]+)$)/},class:"form-control"},null,8,["modelValue","rules"]),(0,f._)("label",za,[(0,f.Uk)("時薪 "),(0,f.Wm)(r,{name:"時薪",class:"text-danger ms-3"})])])]),(0,f._)("div",qa,[n.status?(0,f.kq)("",!0):((0,f.wg)(),(0,f.iD)("button",{key:0,type:"button",class:"btn btn-outline-danger",onClick:e[8]||(e[8]=(...t)=>l.deleteProfile&&l.deleteProfile(...t))}," 刪除員工資料 ")),Fa,(0,f._)("button",{type:"submit",class:"btn btn-primary",disabled:!o.valid}," Save changes ",8,Ta)])])),_:1},8,["onSubmit"])])])],512)}var Ja={data(){return{modal:"",status:!1,tempData:{name:"",phone:"",idNumber:"",imageFront:"",imageBack:"",seniority:"",hourlyRate:0,position:"工人",_id:""}}},methods:{isPhone(t){const e=/^(09)[0-9]{8}$/;return!!e.test(t)||"需要正確的電話號碼"},addEditWorker(){this.$emitter.emit("loadingStatus",!0),this.tempData._id?(0,vt.i3)(this.tempData).then((()=>{this.$emitter.emit("messageModal",{status:!0,message:"修改成功"}),this.$emitter.emit("getWorkerLsit"),this.$emitter.emit("loadingStatus",!1),this.hideModal()})).catch((t=>{console.log(t),this.$emitter.emit("loadingStatus",!1)})):(0,vt.nx)(this.tempData).then((t=>{console.log(t),this.$emitter.emit("messageModal",{status:!0,message:"新增成功"}),this.$emitter.emit("getWorkerLsit"),this.$emitter.emit("loadingStatus",!1),this.hideModal()})).catch((t=>{console.log(t),this.$emitter.emit("loadingStatus",!1)}))},deleteProfile(){this.$emitter.emit("loadingStatus",!0);const t=prompt(`輸入該用戶ＩＤ：${this.tempData._id}`,"");t===this.tempData._id?(0,vt.Mu)(this.tempData._id).then((t=>{console.log(t),this.$emitter.emit("messageModal",{status:!0,message:"刪除成功"}),this.$emitter.emit("loadingStatus",!1),this.$emitter.emit("getWorkerLsit"),this.hideModal()})).catch((t=>{console.log(t),this.$emitter.emit("messageModal",{status:!1,message:"刪除失敗"}),this.$emitter.emit("loadingStatus",!1)})):this.$emitter.emit("loadingStatus",!1)},showModal(){this.modal.show()},hideModal(){this.tempData={},this.modal.hide()}},mounted(){this.modal=new c.u_(this.$refs.addEditWorker),this.$emitter.on("addEditWorker",(t=>{this.status=t.status,t.status||(this.tempData=JSON.parse(JSON.stringify(t.data))),this.showModal()}))}};const Ba=(0,E.Z)(Ja,[["render",Ra]]);var Ha=Ba;const Ya={class:"modal fade","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"edit"},Ga={class:"modal-dialog"},Ka={class:"modal-content"},Qa={class:"modal-header"},Xa={class:"modal-title fs-5",id:"exampleModalLabel"},ts={key:0},es={key:1},as={class:"modal-body"},ss={class:"form-floating mb-3"},os={id:"datalistOptions"},ns=["value"],ls={for:"floatingInput"},is={class:"form-floating mb-3"},rs={for:"floatingInput"},ds={class:"form-floating mb-3"},ms={for:"floatingInput"},cs={class:"form-floating mb-3"},us=(0,f._)("option",{value:"現金"},"現金",-1),ps=(0,f._)("option",{value:"支票"},"支票",-1),hs={for:"floatingInput"},fs={class:"form-floating mb-3"},bs={for:"floatingInput"},gs={class:"form-floating mb-3"},_s={for:"floatingInput"},vs={class:"modal-footer justify-content-between"},ys=(0,f._)("div",null,null,-1),ks=["disabled"];function ws(t,e,a,s,o,n){const l=(0,f.up)("VField"),i=(0,f.up)("ErrorMessage"),r=(0,f.up)("VForm");return(0,f.wg)(),(0,f.iD)("div",Ya,[(0,f._)("div",Ga,[(0,f._)("div",Ka,[(0,f._)("div",Qa,[(0,f._)("h1",Xa,[o.status?((0,f.wg)(),(0,f.iD)("span",ts,"新增工單")):((0,f.wg)(),(0,f.iD)("span",es,"修改工單"))]),(0,f._)("button",{type:"button",class:"btn-close",onClick:e[0]||(e[0]=(...t)=>n.hideModal&&n.hideModal(...t)),"aria-label":"Close"})]),(0,f.Wm)(r,{ref:"formRefSignin",id:"profileForm",onSubmit:n.editOrder},{default:(0,f.w5)((({meta:t})=>[(0,f._)("div",as,[(0,f._)("section",null,[(0,f._)("div",ss,[(0,f.Wm)(l,{name:"廠商",type:"text",rules:n.isCompanyExist,class:"form-control",list:"datalistOptions"},null,8,["rules"]),(0,f._)("datalist",os,[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(o.companyList,((t,e)=>((0,f.wg)(),(0,f.iD)("option",{key:e,value:t.companyName},null,8,ns)))),128))]),(0,f._)("label",ls,[(0,f.Uk)("廠商名稱"),(0,f.Wm)(i,{name:"廠商",class:"text-danger ms-3"})])]),(0,f._)("div",is,[(0,f.Wm)(l,{name:"施工地址",rules:"required",type:"text",modelValue:o.tempData.address,"onUpdate:modelValue":e[1]||(e[1]=t=>o.tempData.address=t),class:"form-control"},null,8,["modelValue"]),(0,f._)("label",rs,[(0,f.Uk)("施工地址"),(0,f.Wm)(i,{name:"施工地址",class:"text-danger ms-3"})])]),(0,f._)("div",ds,[(0,f.Wm)(l,{name:"施工日期",rules:"required",type:"date",modelValue:o.tempData.constructionDate,"onUpdate:modelValue":e[2]||(e[2]=t=>o.tempData.constructionDate=t),class:"form-control"},null,8,["modelValue"]),(0,f._)("label",ms,[(0,f.Uk)("施工日期"),(0,f.Wm)(i,{name:"施工日期",class:"text-danger ms-3"})])]),(0,f._)("div",cs,[(0,f.Wm)(l,{name:"付款方式",as:"select",rules:"required",class:"form-control",modelValue:o.tempData.paymentMethod,"onUpdate:modelValue":e[3]||(e[3]=t=>o.tempData.paymentMethod=t)},{default:(0,f.w5)((()=>[us,ps])),_:1},8,["modelValue"]),(0,f._)("label",hs,[(0,f.Uk)("付款方式"),(0,f.Wm)(i,{name:"付款方式",class:"text-danger ms-3"})])]),(0,f._)("div",fs,[(0,f.Wm)(l,{name:"總金額",type:"number",rules:"required",modelValue:o.tempData.total,"onUpdate:modelValue":e[4]||(e[4]=t=>o.tempData.total=t),class:"form-control"},null,8,["modelValue"]),(0,f._)("label",bs,[(0,f.Uk)("總金額"),(0,f.Wm)(i,{name:"總金額",class:"text-danger ms-3"})])]),(0,f._)("div",gs,[(0,f.Wm)(l,{name:"保留款",type:"number",modelValue:o.tempData.retainage,"onUpdate:modelValue":e[5]||(e[5]=t=>o.tempData.retainage=t),class:"form-control"},null,8,["modelValue"]),(0,f._)("label",_s,[(0,f.Uk)("保留款"),(0,f.Wm)(i,{name:"保留款",class:"text-danger ms-3"})])])])]),(0,f._)("div",vs,[o.status?(0,f.kq)("",!0):((0,f.wg)(),(0,f.iD)("button",{key:0,type:"button",class:"btn btn-outline-danger",onClick:e[6]||(e[6]=t=>n.deleteOrder(o.tempData._id))}," 刪除該工單 ")),ys,(0,f._)("button",{type:"submit",class:"btn btn-primary",disabled:!t.valid}," 儲存 ",8,ks)])])),_:1},8,["onSubmit"])])])],512)}var Ds={data(){return{modal:"",status:!1,tempData:{address:"",company:"",status:0,paymentMethod:"",total:0,retainage:0,constructionDate:"",workers:[],transferWorkers:[]},tempWorker:[],companyList:[],workerList:[],tempWorkerList:[]}},watch:{},methods:{isCompanyExist(t){this.tempData.company="";let e="";return this.companyList.forEach((a=>{a.companyName===t&&(e=a.company,this.tempData.company=a._id)})),""!==e||"查無此廠商"},getCompany(){this.$emitter.emit("loadingStatus",!0),(0,vt.rO)().then((t=>{this.$emitter.emit("loadingStatus",!1),this.companyList=t.data.data})).catch((t=>{this.$emitter.emit("loadingStatus",!1),console.log(t)}))},toggleCheck(t,e){if(this.workerList[e].status=!t.status,t.status)this.tempWorkerList.push(t);else{const e=e=>e._id===t._id,a=this.tempWorkerList.findIndex(e);this.tempWorkerList.splice(a,1)}},deleteOrder(t){this.$emitter.emit("loadingStatus",!0),(0,vt.LW)(t).then((()=>{this.$emitter.emit("loadingStatus",!1),this.$emitter.emit("messageModal",{status:!0,message:"刪除成功"}),this.$emitter.emit("getOrder"),this.hideModal()})).catch((t=>{console.log(t)}))},editOrder(){this.tempData.workers=this.tempWorkerList,(0,vt.WA)(this.tempData).then((()=>{this.$emitter.emit("loadingStatus",!1),this.$emitter.emit("messageModal",{status:!0,message:"修改成功"}),this.$emitter.emit("getOrder"),this.hideModal()})).catch((t=>{console.log(t),this.$emitter.emit("loadingStatus",!1)}))},addTransArray(){this.tempData.transferWorkers.push({})},deleteTransArray(t){this.tempData.transferWorkers.splice(t,1)},showModal(){this.modal.show()},hideModal(){this.tempData={address:"",company:"",status:0,paymentMethod:"",total:0,retainage:0,constructionDate:"",workers:[],transferWorkers:[]},this.modal.hide()}},mounted(){this.getCompany(),this.modal=new c.u_(this.$refs.edit),this.$emitter.on("editOrder",(t=>{this.status=t.status,t.status||(this.tempData=JSON.parse(JSON.stringify(t.data)),this.tempData.workers.forEach((t=>{this.workerList.forEach((e=>{t._id._id===e._id&&(e.status=!0)}))})),this.tempWorkerList=[],this.workerList.forEach((t=>{t.status&&this.tempWorkerList.push(t)})),this.tempWorkerList.forEach((t=>{this.tempData.workers.forEach((e=>{t._id===e._id._id&&(t.time=e.time)}))}))),this.showModal()}))}};const xs=(0,E.Z)(Ds,[["render",ws]]);var $s=xs;const Ms={class:"modal fade",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"cooperate"},Ws={class:"modal-dialog modal-lg"},Os={class:"modal-content"},Cs=(0,f._)("div",{class:"modal-header"},[(0,f._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Ss={class:"modal-body"},Vs={class:"table table-striped"},Us=(0,f._)("thead",null,[(0,f._)("tr",null,[(0,f._)("th",{scope:"col"},"#"),(0,f._)("th",{scope:"col"},"工程名稱"),(0,f._)("th",{scope:"col"},"金額"),(0,f._)("th",{scope:"col"},"日期"),(0,f._)("th",{scope:"col"},"是否完成")])],-1),Es={scope:"row"},Ls={key:0},Is={key:1};function Ps(t,e,a,s,o,n){return(0,f.wg)(),(0,f.iD)("div",Ms,[(0,f._)("div",Ws,[(0,f._)("div",Os,[Cs,(0,f._)("div",Ss,[(0,f._)("table",Vs,[Us,(0,f._)("tbody",null,[((0,f.wg)(!0),(0,f.iD)(f.HY,null,(0,f.Ko)(o.tempData,((t,e)=>((0,f.wg)(),(0,f.iD)("tr",{key:e},[(0,f._)("th",Es,(0,_.zw)(e+1),1),(0,f._)("td",null,(0,_.zw)(t._id),1),(0,f._)("td",null,(0,_.zw)(t.total),1),(0,f._)("td",null,(0,_.zw)(t.constructionDate),1),(0,f._)("td",null,[(0,f._)("button",{class:(0,_.C_)(["btn",[t.status?"btn-outline-success":"btn-outline-danger"]]),disabled:""},[t.status?((0,f.wg)(),(0,f.iD)("span",Ls,"完工")):((0,f.wg)(),(0,f.iD)("span",Is,"未完工"))],2)])])))),128))])])])])])],512)}var Zs={data(){return{modal:"",tempData:"",tempOrder:""}},methods:{getOrder(t){this.$emitter.emit("loadingStatus",!0),(0,vt.IP)(t).then((t=>{this.$emitter.emit("loadingStatus",!1),this.tempOrder=t.data.data})).catch((t=>{this.$emitter.emit("loadingStatus",!1),console.log(t)}))},getCooperList(t){this.$emitter.emit("loadingStatus",!0),(0,vt.fy)(t).then((t=>{this.$emitter.emit("loadingStatus",!1),this.tempData=t.data.data})).catch((t=>{this.$emitter.emit("loadingStatus",!1),console.log(t.response.data.message)}))},showModal(){this.modal.show()}},mounted(){this.modal=new c.u_(this.$refs.cooperate),this.$emitter.on("cooperList",(t=>{this.getCooperList(t),this.showModal()}))}};const Ns=(0,E.Z)(Zs,[["render",Ps]]);var js=Ns,As={components:{Loading:q,Message:H,Navbar:I,WorkRecordModal:wt,AddEditCompany:Pe,AddEditOrder:pa,AddEditWorker:Ha,PDF:ce,EditOrder:$s,CooperateModal:js},methods:{checkSignIn(){const t=(0,V.LP)();t?this.$http.defaults.headers.common.Authorization=`Bearer ${t}`:this.$router.push("/login")},signOut(){(0,V.qz)(),this.$router.push("/signin")}},created(){this.checkSignIn()}};const zs=(0,E.Z)(As,[["render",g]]);var qs=zs,Fs=a(2201);const Ts=[{path:"/",name:"index",component:()=>a.e(796).then(a.bind(a,2796))},{path:"/login",name:"login",component:()=>a.e(854).then(a.bind(a,8854))},{path:"/personnel",name:"personnel",component:()=>a.e(898).then(a.bind(a,8898))},{path:"/company",name:"company",component:()=>a.e(457).then(a.bind(a,6457))},{path:"/order",name:"order",component:()=>a.e(860).then(a.bind(a,3860))},{path:"/demo",name:"demo",component:()=>a.e(45).then(a.bind(a,6045))},{path:"/newOrder",name:"newOrder",component:()=>a.e(780).then(a.bind(a,4780))}],Rs=(0,Fs.p7)({history:(0,Fs.r5)(),routes:Ts});var Js=Rs;Object.keys(n).forEach((t=>{(0,o.aH)(t,n[t])})),(0,o.jQ)({generateMessage:(0,l.NC)({zh_TW:i}),validateOnInput:!0}),(0,l.i_)("zh_TW");const Bs=(0,m.Z)(),Hs=(0,s.ri)(qs);Hs.config.globalProperties.$emitter=Bs,Hs.config.globalProperties.$toCurrency=h,Hs.component("VField",o.gN),Hs.component("VForm",o.l0),Hs.component("ErrorMessage",o.Bc),Hs.use(r.LoadingPlugin),Hs.use(p.Z,u.Z),Hs.use(Js),Js.afterEach((()=>{window.scrollTo(0,0)})),Hs.mount("#app")}},e={};function a(s){var o=e[s];if(void 0!==o)return o.exports;var n=e[s]={id:s,loaded:!1,exports:{}};return t[s].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=t,function(){a.amdO={}}(),function(){var t=[];a.O=function(e,s,o,n){if(!s){var l=1/0;for(m=0;m<t.length;m++){s=t[m][0],o=t[m][1],n=t[m][2];for(var i=!0,r=0;r<s.length;r++)(!1&n||l>=n)&&Object.keys(a.O).every((function(t){return a.O[t](s[r])}))?s.splice(r--,1):(i=!1,n<l&&(l=n));if(i){t.splice(m--,1);var d=o();void 0!==d&&(e=d)}}return e}n=n||0;for(var m=t.length;m>0&&t[m-1][2]>n;m--)t[m]=t[m-1];t[m]=[s,o,n]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){var t,e=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__};a.t=function(s,o){if(1&o&&(s=this(s)),8&o)return s;if("object"===typeof s&&s){if(4&o&&s.__esModule)return s;if(16&o&&"function"===typeof s.then)return s}var n=Object.create(null);a.r(n);var l={};t=t||[null,e({}),e([]),e(e)];for(var i=2&o&&s;"object"==typeof i&&!~t.indexOf(i);i=e(i))Object.getOwnPropertyNames(i).forEach((function(t){l[t]=function(){return s[t]}}));return l["default"]=function(){return s},a.d(n,l),n}}(),function(){a.d=function(t,e){for(var s in e)a.o(e,s)&&!a.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})}}(),function(){a.f={},a.e=function(t){return Promise.all(Object.keys(a.f).reduce((function(e,s){return a.f[s](t,e),e}),[]))}}(),function(){a.u=function(t){return"js/"+t+"."+{43:"b9fa0a35",45:"a928563c",457:"b21a58f7",780:"77acff62",796:"10790325",854:"5c2acb94",856:"565a2406",860:"630fa03c",898:"b3140826"}[t]+".js"}}(),function(){a.miniCssF=function(t){}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.hmd=function(t){return t=Object.create(t),t.children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t}}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={},e="web:";a.l=function(s,o,n,l){if(t[s])t[s].push(o);else{var i,r;if(void 0!==n)for(var d=document.getElementsByTagName("script"),m=0;m<d.length;m++){var c=d[m];if(c.getAttribute("src")==s||c.getAttribute("data-webpack")==e+n){i=c;break}}i||(r=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack",e+n),i.src=s),t[s]=[o];var u=function(e,a){i.onerror=i.onload=null,clearTimeout(p);var o=t[s];if(delete t[s],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((function(t){return t(a)})),e)return e(a)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=u.bind(null,i.onerror),i.onload=u.bind(null,i.onload),r&&document.head.appendChild(i)}}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.p=""}(),function(){var t={143:0};a.f.j=function(e,s){var o=a.o(t,e)?t[e]:void 0;if(0!==o)if(o)s.push(o[2]);else{var n=new Promise((function(a,s){o=t[e]=[a,s]}));s.push(o[2]=n);var l=a.p+a.u(e),i=new Error,r=function(s){if(a.o(t,e)&&(o=t[e],0!==o&&(t[e]=void 0),o)){var n=s&&("load"===s.type?"missing":s.type),l=s&&s.target&&s.target.src;i.message="Loading chunk "+e+" failed.\n("+n+": "+l+")",i.name="ChunkLoadError",i.type=n,i.request=l,o[1](i)}};a.l(l,r,"chunk-"+e,e)}},a.O.j=function(e){return 0===t[e]};var e=function(e,s){var o,n,l=s[0],i=s[1],r=s[2],d=0;if(l.some((function(e){return 0!==t[e]}))){for(o in i)a.o(i,o)&&(a.m[o]=i[o]);if(r)var m=r(a)}for(e&&e(s);d<l.length;d++)n=l[d],a.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return a.O(m)},s=self["webpackChunkweb"]=self["webpackChunkweb"]||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))}();var s=a.O(void 0,[998],(function(){return a(6602)}));s=a.O(s)})();
//# sourceMappingURL=app.87b3d738.js.map